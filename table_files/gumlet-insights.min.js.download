/*! For license information please see gumlet-insights.min.js.LICENSE.txt */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var a=e();for(var i in a)("object"==typeof exports?exports:t)[i]=a[i]}}(self,(()=>(()=>{var t={363:(t,e)=>{var a;a={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(t,e){var i="string"==typeof t.initial?{state:t.initial}:t.initial,s=t.terminal||t.final,n=e||t.target||{},r=t.events||[],o=t.callbacks||{},l={},u={},c=function(t){var e=Array.isArray(t.from)?t.from:t.from?[t.from]:[a.WILDCARD];l[t.name]=l[t.name]||{};for(var i=0;i<e.length;i++)u[e[i]]=u[e[i]]||[],u[e[i]].push(t.name),l[t.name][e[i]]=t.to||e[i];t.to&&(u[t.to]=u[t.to]||[])};i&&(i.event=i.event||"startup",c({name:i.event,from:"none",to:i.state}));for(var E=0;E<r.length;E++)c(r[E]);for(var h in l)l.hasOwnProperty(h)&&(n[h]=a.buildEvent(h,l[h]));for(var h in o)o.hasOwnProperty(h)&&(n[h]=o[h]);return n.current="none",n.is=function(t){return Array.isArray(t)?t.indexOf(this.current)>=0:this.current===t},n.can=function(t){return!this.transition&&void 0!==l[t]&&(l[t].hasOwnProperty(this.current)||l[t].hasOwnProperty(a.WILDCARD))},n.cannot=function(t){return!this.can(t)},n.transitions=function(){return(u[this.current]||[]).concat(u[a.WILDCARD]||[])},n.isFinished=function(){return this.is(s)},n.error=t.error||function(t,e,a,i,s,n,r){throw r||n},n.states=function(){return Object.keys(u).sort()},i&&!i.defer&&n[i.event](),n},doCallback:function(t,e,i,s,n,r){if(e)try{return e.apply(t,[i,s,n].concat(r))}catch(e){return t.error(i,s,n,r,a.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",e)}},beforeAnyEvent:function(t,e,i,s,n){return a.doCallback(t,t.onbeforeevent,e,i,s,n)},afterAnyEvent:function(t,e,i,s,n){return a.doCallback(t,t.onafterevent||t.onevent,e,i,s,n)},leaveAnyState:function(t,e,i,s,n){return a.doCallback(t,t.onleavestate,e,i,s,n)},enterAnyState:function(t,e,i,s,n){return a.doCallback(t,t.onenterstate||t.onstate,e,i,s,n)},changeState:function(t,e,i,s,n){return a.doCallback(t,t.onchangestate,e,i,s,n)},beforeThisEvent:function(t,e,i,s,n){return a.doCallback(t,t["onbefore"+e],e,i,s,n)},afterThisEvent:function(t,e,i,s,n){return a.doCallback(t,t["onafter"+e]||t["on"+e],e,i,s,n)},leaveThisState:function(t,e,i,s,n){return a.doCallback(t,t["onleave"+i],e,i,s,n)},enterThisState:function(t,e,i,s,n){return a.doCallback(t,t["onenter"+s]||t["on"+s],e,i,s,n)},beforeEvent:function(t,e,i,s,n){if(!1===a.beforeThisEvent(t,e,i,s,n)||!1===a.beforeAnyEvent(t,e,i,s,n))return!1},afterEvent:function(t,e,i,s,n){a.afterThisEvent(t,e,i,s,n),a.afterAnyEvent(t,e,i,s,n)},leaveState:function(t,e,i,s,n){var r=a.leaveThisState(t,e,i,s,n),o=a.leaveAnyState(t,e,i,s,n);return!1!==r&&!1!==o&&(a.ASYNC===r||a.ASYNC===o?a.ASYNC:void 0)},enterState:function(t,e,i,s,n){a.enterThisState(t,e,i,s,n),a.enterAnyState(t,e,i,s,n)},buildEvent:function(t,e){return function(){var i=this.current,s=e[i]||(e[a.WILDCARD]!=a.WILDCARD?e[a.WILDCARD]:i)||i,n=Array.prototype.slice.call(arguments);if(this.transition)return this.error(t,i,s,n,a.Error.PENDING_TRANSITION,"event "+t+" inappropriate because previous transition did not complete");if(this.cannot(t))return this.error(t,i,s,n,a.Error.INVALID_TRANSITION,"event "+t+" inappropriate in current state "+this.current);if(!1===a.beforeEvent(this,t,i,s,n))return a.Result.CANCELLED;if(i===s)return a.afterEvent(this,t,i,s,n),a.Result.NOTRANSITION;var r=this;this.transition=function(){return r.transition=null,r.current=s,a.enterState(r,t,i,s,n),a.changeState(r,t,i,s,n),a.afterEvent(r,t,i,s,n),a.Result.SUCCEEDED},this.transition.cancel=function(){r.transition=null,a.afterEvent(r,t,i,s,n)};var o=a.leaveState(this,t,i,s,n);return!1===o?(this.transition=null,a.Result.CANCELLED):a.ASYNC===o?a.Result.PENDING:this.transition?this.transition():void 0}}},t.exports&&(e=t.exports=a),e.StateMachine=a},795:function(t,e,a){var i;t=a.nmd(t),function(){"use strict";var s={function:!0,object:!0},n=s[typeof window]&&window||this,r=s[typeof e]&&e,o=s.object&&t&&!t.nodeType&&t,l=r&&o&&"object"==typeof a.g&&a.g;!l||l.global!==l&&l.window!==l&&l.self!==l||(n=l);var u=Math.pow(2,53)-1,c=/\bOpera/,E=Object.prototype,h=E.hasOwnProperty,S=E.toString;function d(t){return(t=String(t)).charAt(0).toUpperCase()+t.slice(1)}function m(t){return t=_(t),/^(?:webOS|i(?:OS|P))/.test(t)?t:d(t)}function f(t,e){for(var a in t)h.call(t,a)&&e(t[a],a,t)}function p(t){return null==t?d(t):S.call(t).slice(8,-1)}function A(t){return String(t).replace(/([ -])(?!$)/g,"$1?")}function y(t,e){var a=null;return function(t,e){var a=-1,i=t?t.length:0;if("number"==typeof i&&i>-1&&i<=u)for(;++a<i;)e(t[a],a,t);else f(t,e)}(t,(function(i,s){a=e(a,i,s,t)})),a}function _(t){return String(t).replace(/^ +| +$/g,"")}var N=function t(e){var a=n,i=e&&"object"==typeof e&&"String"!=p(e);i&&(a=e,e=null);var s=a.navigator||{},r=s.userAgent||"";e||(e=r);var o,l,u,E,h,d=i?!!s.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(S.toString()),N="Object",v=i?N:"ScriptBridgingProxyObject",g=i?N:"Environment",I=i&&a.java?"JavaPackage":p(a.java),D=i?N:"RuntimeObject",T=/\bJava/.test(I)&&a.java,P=T&&p(a.environment)==g,C=T?"a":"α",U=T?"b":"β",b=a.document||{},G=a.operamini||a.opera,R=c.test(R=i&&G?G["[[Class]]"]:p(G))?R:G=null,L=e,Y=[],O=null,F=e==r,k=F&&G&&"function"==typeof G.version&&G.version(),w=y([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(t,a){return t||RegExp("\\b"+(a.pattern||A(a))+"\\b","i").exec(e)&&(a.label||a)})),M=function(t){return y(t,(function(t,a){return t||RegExp("\\b"+(a.pattern||A(a))+"\\b","i").exec(e)&&(a.label||a)}))}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),H=B([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),K=function(t){return y(t,(function(t,a,i){return t||(a[H]||a[/^[a-z]+(?: +[a-z]+\b)*/i.exec(H)]||RegExp("\\b"+A(i)+"(?:\\b|\\w*\\d)","i").exec(e))&&i}))}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),V=function(t){return y(t,(function(t,a){var i=a.pattern||A(a);return!t&&(t=RegExp("\\b"+i+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=function(t,e,a){var i={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return e&&a&&/^Win/i.test(t)&&!/^Windows Phone /i.test(t)&&(i=i[/[\d.]+$/.exec(t)])&&(t="Windows "+i),t=String(t),e&&a&&(t=t.replace(RegExp(e,"i"),a)),m(t.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(t,i,a.label||a)),t}))}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function B(t){return y(t,(function(t,a){var i=a.pattern||A(a);return!t&&(t=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+i+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(a.label&&!RegExp(i,"i").test(a.label)?a.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),a=a.label||a,t=m(t[0].replace(RegExp(i,"i"),a).replace(RegExp("; *(?:"+a+"[_-])?","i")," ").replace(RegExp("("+a+")[-_.]?(\\w)","i"),"$1 $2"))),t}))}function j(t){return y(t,(function(t,a){return t||(RegExp(a+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null}))}if(w&&(w=[w]),/\bAndroid\b/.test(V)&&!H&&(o=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(e))&&(H=_(o[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),K&&!H?H=B([K]):K&&H&&(H=H.replace(RegExp("^("+A(K)+")[-_.\\s]","i"),K+" ").replace(RegExp("^("+A(K)+")[-_.]?(\\w)","i"),K+" $2")),(o=/\bGoogle TV\b/.exec(H))&&(H=o[0]),/\bSimulator\b/i.test(e)&&(H=(H?H+" ":"")+"Simulator"),"Opera Mini"==M&&/\bOPiOS\b/.test(e)&&Y.push("running in Turbo/Uncompressed mode"),"IE"==M&&/\blike iPhone OS\b/.test(e)?(K=(o=t(e.replace(/like iPhone OS/,""))).manufacturer,H=o.product):/^iP/.test(H)?(M||(M="Safari"),V="iOS"+((o=/ OS ([\d_]+)/i.exec(e))?" "+o[1].replace(/_/g,"."):"")):"Konqueror"==M&&/^Linux\b/i.test(V)?V="Kubuntu":K&&"Google"!=K&&(/Chrome/.test(M)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(H))||/\bAndroid\b/.test(V)&&/^Chrome/.test(M)&&/\bVersion\//i.test(e)?(M="Android Browser",V=/\bAndroid\b/.test(V)?V:"Android"):"Silk"==M?(/\bMobi/i.test(e)||(V="Android",Y.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&Y.unshift("accelerated")):"UC Browser"==M&&/\bUCWEB\b/.test(e)?Y.push("speed mode"):"PaleMoon"==M&&(o=/\bFirefox\/([\d.]+)\b/.exec(e))?Y.push("identifying as Firefox "+o[1]):"Firefox"==M&&(o=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(V||(V="Firefox OS"),H||(H=o[1])):!M||(o=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(M))?(M&&!H&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(o+"/")+8))&&(M=null),(o=H||K||V)&&(H||K||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(V))&&(M=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(V)?V:o)+" Browser")):"Electron"==M&&(o=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&Y.push("Chromium "+o),k||(k=j(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",A(M),"(?:Firefox|Minefield|NetFront)"])),(o=("iCab"==w&&parseFloat(k)>3?"WebKit":/\bOpera\b/.test(M)&&(/\bOPR\b/.test(e)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(w)&&"WebKit"||!w&&/\bMSIE\b/i.test(e)&&("Mac OS"==V?"Tasman":"Trident")||"WebKit"==w&&/\bPlayStation\b(?! Vita\b)/i.test(M)&&"NetFront")&&(w=[o]),"IE"==M&&(o=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(M+=" Mobile",V="Windows Phone "+(/\+$/.test(o)?o:o+".x"),Y.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(M="IE Mobile",V="Windows Phone 8.x",Y.unshift("desktop mode"),k||(k=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=M&&"Trident"==w&&(o=/\brv:([\d.]+)/.exec(e))&&(M&&Y.push("identifying as "+M+(k?" "+k:"")),M="IE",k=o[1]),F){if(E="global",h=null!=(u=a)?typeof u[E]:"number",/^(?:boolean|number|string|undefined)$/.test(h)||"object"==h&&!u[E])p(o=a.runtime)==v?(M="Adobe AIR",V=o.flash.system.Capabilities.os):p(o=a.phantom)==D?(M="PhantomJS",k=(o=o.version||null)&&o.major+"."+o.minor+"."+o.patch):"number"==typeof b.documentMode&&(o=/\bTrident\/(\d+)/i.exec(e))?(k=[k,b.documentMode],(o=+o[1]+4)!=k[1]&&(Y.push("IE "+k[1]+" mode"),w&&(w[1]=""),k[1]=o),k="IE"==M?String(k[1].toFixed(1)):k[0]):"number"==typeof b.documentMode&&/^(?:Chrome|Firefox)\b/.test(M)&&(Y.push("masking as "+M+" "+k),M="IE",k="11.0",w=["Trident"],V="Windows");else if(T&&(L=(o=T.lang.System).getProperty("os.arch"),V=V||o.getProperty("os.name")+" "+o.getProperty("os.version")),P){try{k=a.require("ringo/engine").version.join("."),M="RingoJS"}catch(t){(o=a.system)&&o.global.system==a.system&&(M="Narwhal",V||(V=o[0].os||null))}M||(M="Rhino")}else"object"==typeof a.process&&!a.process.browser&&(o=a.process)&&("object"==typeof o.versions&&("string"==typeof o.versions.electron?(Y.push("Node "+o.versions.node),M="Electron",k=o.versions.electron):"string"==typeof o.versions.nw&&(Y.push("Chromium "+k,"Node "+o.versions.node),M="NW.js",k=o.versions.nw)),M||(M="Node.js",L=o.arch,V=o.platform,k=(k=/[\d.]+/.exec(o.version))?k[0]:null));V=V&&m(V)}if(k&&(o=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(k)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(F&&s.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(O=/b/i.test(o)?"beta":"alpha",k=k.replace(RegExp(o+"\\+?$"),"")+("beta"==O?U:C)+(/\d+\+?/.exec(o)||"")),"Fennec"==M||"Firefox"==M&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(V))M="Firefox Mobile";else if("Maxthon"==M&&k)k=k.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(H))"Xbox 360"==H&&(V=null),"Xbox 360"==H&&/\bIEMobile\b/.test(e)&&Y.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(M)&&(!M||H||/Browser|Mobi/.test(M))||"Windows CE"!=V&&!/Mobi/i.test(e))if("IE"==M&&F)try{null===a.external&&Y.unshift("platform preview")}catch(t){Y.unshift("embedded")}else(/\bBlackBerry\b/.test(H)||/\bBB10\b/.test(e))&&(o=(RegExp(H.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||k)?(V=((o=[o,/BB10/.test(e)])[1]?(H=null,K="BlackBerry"):"Device Software")+" "+o[0],k=null):this!=f&&"Wii"!=H&&(F&&G||/Opera/.test(M)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==M&&/\bOS X (?:\d+\.){2,}/.test(V)||"IE"==M&&(V&&!/^Win/.test(V)&&k>5.5||/\bWindows XP\b/.test(V)&&k>8||8==k&&!/\bTrident\b/.test(e)))&&!c.test(o=t.call(f,e.replace(c,"")+";"))&&o.name&&(o="ing as "+o.name+((o=o.version)?" "+o:""),c.test(M)?(/\bIE\b/.test(o)&&"Mac OS"==V&&(V=null),o="identify"+o):(o="mask"+o,M=R?m(R.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(o)&&(V=null),F||(k=null)),w=["Presto"],Y.push(o));else M+=" Mobile";(o=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(o=[parseFloat(o.replace(/\.(\d)$/,".0$1")),o],"Safari"==M&&"+"==o[1].slice(-1)?(M="WebKit Nightly",O="alpha",k=o[1].slice(0,-1)):k!=o[1]&&k!=(o[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(k=null),o[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(e)||0)[1],537.36==o[0]&&537.36==o[2]&&parseFloat(o[1])>=28&&"WebKit"==w&&(w=["Blink"]),F&&(d||o[1])?(w&&(w[1]="like Chrome"),o=o[1]||((o=o[0])<530?1:o<532?2:o<532.05?3:o<533?4:o<534.03?5:o<534.07?6:o<534.1?7:o<534.13?8:o<534.16?9:o<534.24?10:o<534.3?11:o<535.01?12:o<535.02?"13+":o<535.07?15:o<535.11?16:o<535.19?17:o<536.05?18:o<536.1?19:o<537.01?20:o<537.11?"21+":o<537.13?23:o<537.18?24:o<537.24?25:o<537.36?26:"Blink"!=w?"27":"28")):(w&&(w[1]="like Safari"),o=(o=o[0])<400?1:o<500?2:o<526?3:o<533?4:o<534?"4+":o<535?5:o<537?6:o<538?7:o<601?8:o<602?9:o<604?10:o<606?11:o<608?12:"12"),w&&(w[1]+=" "+(o+="number"==typeof o?".x":/[.+]/.test(o)?"":"+")),"Safari"==M&&(!k||parseInt(k)>45)?k=o:"Chrome"==M&&/\bHeadlessChrome/i.test(e)&&Y.unshift("headless")),"Opera"==M&&(o=/\bzbov|zvav$/.exec(V))?(M+=" ",Y.unshift("desktop mode"),"zvav"==o?(M+="Mini",k=null):M+="Mobile",V=V.replace(RegExp(" *"+o+"$"),"")):"Safari"==M&&/\bChrome\b/.exec(w&&w[1])?(Y.unshift("desktop mode"),M="Chrome Mobile",k=null,/\bOS X\b/.test(V)?(K="Apple",V="iOS 4.3+"):V=null):/\bSRWare Iron\b/.test(M)&&!k&&(k=j("Chrome")),k&&0==k.indexOf(o=/[\d.]+$/.exec(V))&&e.indexOf("/"+o+"-")>-1&&(V=_(V.replace(o,""))),V&&-1!=V.indexOf(M)&&!RegExp(M+" OS").test(V)&&(V=V.replace(RegExp(" *"+A(M)+" *"),"")),w&&!/\b(?:Avant|Nook)\b/.test(M)&&(/Browser|Lunascape|Maxthon/.test(M)||"Safari"!=M&&/^iOS/.test(V)&&/\bSafari\b/.test(w[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(M)&&w[1])&&(o=w[w.length-1])&&Y.push(o),Y.length&&(Y=["("+Y.join("; ")+")"]),K&&H&&H.indexOf(K)<0&&Y.push("on "+K),H&&Y.push((/^on /.test(Y[Y.length-1])?"":"on ")+H),V&&(o=/ ([\d.+]+)$/.exec(V),l=o&&"/"==V.charAt(V.length-o[0].length-1),V={architecture:32,family:o&&!l?V.replace(o[0],""):V,version:o?o[1]:null,toString:function(){var t=this.version;return this.family+(t&&!l?" "+t:"")+(64==this.architecture?" 64-bit":"")}}),(o=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(L))&&!/\bi686\b/i.test(L)?(V&&(V.architecture=64,V.family=V.family.replace(RegExp(" *"+o),"")),M&&(/\bWOW64\b/i.test(e)||F&&/\w(?:86|32)$/.test(s.cpuClass||s.platform)&&!/\bWin64; x64\b/i.test(e))&&Y.unshift("32-bit")):V&&/^OS X/.test(V.family)&&"Chrome"==M&&parseFloat(k)>=39&&(V.architecture=64),e||(e=null);var x={};return x.description=e,x.layout=w&&w[0],x.manufacturer=K,x.name=M,x.prerelease=O,x.product=H,x.ua=e,x.version=M&&k,x.os=V||{architecture:null,family:null,version:null,toString:function(){return"null"}},x.parse=t,x.toString=function(){return this.description||""},x.version&&Y.unshift(k),x.name&&Y.unshift(M),V&&M&&(V!=String(V).split(" ")[0]||V!=M.split(" ")[0]&&!H)&&Y.push(H?"("+V+")":"on "+V),Y.length&&(x.description=Y.join(" ")),x}();n.platform=N,void 0===(i=function(){return N}.call(e,a,e,t))||(t.exports=i)}.call(this)}},e={};function a(i){var s=e[i];if(void 0!==s)return s.exports;var n=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.nmd=t=>(t.paths=[],t.children||(t.children=[]),t);var i={};return(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}a.r(i),a.d(i,{default:()=>sa});var e=function(){return(new Date).getTime()},s=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16).toUpperCase()}))},n=function(t,e){var a,i=0;return function(){return i>=e||(a=t.apply(null,arguments),i++),a}};const r={validString:function(t){return null!=t&&"string"==typeof t},validBoolean:function(t){return null!=t&&"boolean"==typeof t},validNumber:function(t){return null!=t&&"number"==typeof t},sanitizePath:function(t){return t.replace(/\/$/g,"")},calculateTime:function(t){return t*=1e3,Math.round(t)},getCurrentTimestamp:e,getDurationFromTimestampToNow:function(t){return e()-t},uuidv4:s,getCookie:function(t){var e=t+"=",a=[];try{a=document.cookie.split(";")}catch(t){return""}for(var i="",s=0;s<a.length;s++){for(var n=a[s];" "==n.charAt(0);)n=n.substring(1);0==n.indexOf(e)&&(i=n.substring(e.length,n.length))}if(!i){try{i=localStorage.getItem(t)}catch(t){return""}var r=null;if(!i)return"";try{r=JSON.parse(i)}catch(t){return""}var o=null;if(!r.expires)return"";if(o=new Date(r.expires),"[object Date]"!==Object.prototype.toString.call(o))return"";if(isNaN(o))return"";if(!(o.getTime()>(new Date).getTime()))return"";i=r.value?r.value:""}return i},setCookie:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=new Date;i.setTime(i.getTime()+60*e*1e3);var n=a||s();try{document.cookie=t+"="+n+"; expires="+i.toUTCString()+"; path=/",localStorage.setItem(t,JSON.stringify({expires:i.getTime(),value:n}))}catch(t){}return n},noOp:function(){},times:n,once:function(t){return n(t,1)},getHiddenProp:function(){var t=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<t.length;e++)if(t[e]+"Hidden"in document)return t[e]+"Hidden";return null},getCustomDataString:function e(a){return"object"===t(a)?JSON.stringify(a):"function"==typeof a?e(a()):void 0===a?a:"string"!=typeof a?String(a):a},jsonToQueryString:function(t){return"?"+Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")},currentDateTimeFormatString:function(){return(new Date).toISOString()}};function o(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,a,i;return e=t,a=[{key:"get",value:function(t,e,a){var i,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=!1;window.XDomainRequest&&(n=!0),i=n?new window.XDomainRequest:new XMLHttpRequest;var o=function(){if(i.readyState==XMLHttpRequest.DONE){if(i.responseText<=0)return;var t=JSON.parse(i.responseText);a(t)}};n?i.onload=o:i.onreadystatechange=o,e.z=(new Date).getTime()/1e3;var l=[void 0,null,!1];Object.keys(e).forEach((function(t){return-1!==l.indexOf(e[t])&&delete e[t]})),Object.keys(e).forEach((function(t){return e[t]!=e[t]&&delete e[t]}));var u=r.jsonToQueryString(e);t+=u,i.open("GET",t,s),i.send(null)}}],a&&o(e.prototype,a),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var u="urn:x-cast:com.gumlet.ingest.cast",c="https://ingest.gumlytics.com",E=1e4;function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function S(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){return m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},m(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,i=y(t);if(e){var s=y(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return p(this,a)}}function p(t,e){if(e&&("object"===h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return A(t)}function A(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}function _(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var N=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(n,t);var e,a,i,s=f(n);function n(){var t;d(this,n);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return _(A(t=s.call.apply(s,[this].concat(a))),"sendRequest",(function(t,e,a,i){var s={key:t,domain:e,analyticsVersion:a};this.get(n.licenseServerUrl,s,i)})),t}return e=n,a&&S(e.prototype,a),i&&S(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(l);_(N,"licenseServerUrl",c+"/licensing");function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function g(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D(t,e){return D=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},D(t,e)}function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,i=U(t);if(e){var s=U(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return P(this,a)}}function P(t,e){if(e&&("object"===v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return C(t)}function C(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U(t){return U=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},U(t)}function b(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var G=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D(t,e)}(n,t);var e,a,i,s=T(n);function n(){var t;I(this,n);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return b(C(t=s.call.apply(s,[this].concat(a))),"sendRequest",(function(t,e){t.event_family="session_event",this.get(n.analyticsServerUrl,t,e)})),b(C(t),"sendRequestSynchronous",(function(t,e){t.event_family="session_event",this.get(n.analyticsServerUrl,t,e,!1)})),b(C(t),"getAnalyticsServerUrl",(function(){return n.analyticsServerUrl})),t}return e=n,a&&g(e.prototype,a),i&&g(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(l);b(G,"analyticsServerUrl",c);const R=G;function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function Y(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F(t,e){return F=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},F(t,e)}function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,i=H(t);if(e){var s=H(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return w(this,a)}}function w(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return M(t)}function M(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H(t){return H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},H(t)}function K(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var V=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&F(t,e)}(n,t);var e,a,i,s=k(n);function n(){var t;O(this,n);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return K(M(t=s.call.apply(s,[this].concat(a))),"sendRequest",(function(t,e){t.event_family="session",this.get(n.analyticsServerUrl,t,e)})),K(M(t),"sendRequestSynchronous",(function(t,e){t.event_family="session",this.get(n.analyticsServerUrl,t,e,!1)})),K(M(t),"getAnalyticsServerUrl",(function(){return n.analyticsServerUrl})),t}return e=n,a&&Y(e.prototype,a),i&&Y(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(l);K(V,"analyticsServerUrl",c);const B=V;function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function x(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W(t,e){return W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},W(t,e)}function q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,i=X(t);if(e){var s=X(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return J(this,a)}}function J(t,e){if(e&&("object"===j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $(t)}function $(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X(t){return X=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},X(t)}function z(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var Z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W(t,e)}(n,t);var e,a,i,s=q(n);function n(){var t;Q(this,n);for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return z($(t=s.call.apply(s,[this].concat(a))),"sendRequest",(function(t,e){t.event_family="player_init",this.get(n.analyticsServerUrl,t,e)})),z($(t),"sendRequestSynchronous",(function(t,e){t.event_family="player_init",this.get(n.analyticsServerUrl,t,e,!1)})),z($(t),"getAnalyticsServerUrl",(function(){return n.analyticsServerUrl})),t}return e=n,a&&x(e.prototype,a),i&&x(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(l);z(Z,"analyticsServerUrl",c);const tt=Z;const et=function(){var t=window.navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(t)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(t)?"mobile":"desktop"};function at(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function it(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function st(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const nt=new(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];at(this,t),st(this,"log",(function(t){this.showLogs&&console.log(t)})),st(this,"error",(function(t){this.showLogs&&console.error(t)})),st(this,"warning",(function(t){this.showLogs&&console.warn(t)})),this.showLogs=e}var e,a,i;return e=t,(a=[{key:"setLogging",value:function(t){this.showLogs=t}},{key:"isLogging",value:function(){return this.showLogs}}])&&it(e.prototype,a),i&&it(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}());function rt(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ot(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var lt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,a,i;return e=t,i=[{key:"isShaka",value:function(t){return!!window.shaka&&"function"==typeof shaka.Player&&t.constructor===shaka.Player}},{key:"isDashjs",value:function(t){return"function"==typeof t.addABRCustomRule}},{key:"isHlsjs",value:function(t){return!!window.Hls&&"function"==typeof window.Hls&&t.constructor===window.Hls}}],(a=null)&&rt(e.prototype,a),i&&rt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();ot(lt,"isBitmovinVersionPre7",(function(t){return!lt.isDashjs(t)&&("function"==typeof t.getVersion&&t.getVersion()<"7")})),ot(lt,"isBitmovinVersion7Plus",(function(t){return"string"==typeof t.version&&t.version>="7"})),ot(lt,"isVideoJs",(function(t){if("function"==typeof videojs)try{if(videojs(t.id_)===t)return!0}catch(t){}return!1}));const ut=lt;const ct={READY:"ready",STARTUP:"startup",SOURCE_LOADED:"sourceLoaded",PLAY:"play",PAUSE:"pause",TIMECHANGED:"timechanged",SEEK:"seek",SEEKED:"seeked",START_CAST:"startCasting",END_CAST:"endCasting",START_BUFFERING:"startBuffering",END_BUFFERING:"endBuffering",AUDIO_CHANGE:"audioChange",VIDEO_CHANGE:"videoChange",START_FULLSCREEN:"startFullscreen",END_FULLSCREEN:"endFullscreen",START_AD:"adStart",END_AD:"adEnd",MUTE:"mute",UN_MUTE:"unMute",ERROR:"playerError",PLAYBACK_FINISHED:"end",SCREEN_RESIZE:"resize",UNLOAD:"unload",END:"end",METADATA_LOADED:"metadataLoaded",SOURCE_UNLOADED:"sourceUnloaded",PLAYBACK_PLAYING:"playback_playing"};function Et(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const ht=function(){function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.onBeforeUnLoadEvent=!1,this.player=e,this.eventCallback=a,this.register()}var e,a,i;return e=t,(a=[{key:"register",value:function(){var t=this;this.player.addEventHandler(this.player.EVENT.ON_SOURCE_LOADED,(function(){t.eventCallback(ct.SOURCE_LOADED)})),this.player.addEventHandler(this.player.EVENT.ON_READY,(function(){var e=!1;t.player.getConfig().playback&&t.player.getConfig().playback.autoplay&&(e=t.player.getConfig().playback.autoplay),t.eventCallback(ct.READY,{isLive:t.player.isLive(),version:t.player.getVersion(),type:t.player.getPlayerType(),duration:t.player.getDuration(),streamType:t.player.getStreamType(),videoId:t.player.getConfig().source.videoId,userId:t.player.getConfig().source.userId,mpdUrl:t.player.getConfig().source.dash,m3u8Url:t.player.getConfig().source.hls,progUrl:t.player.getConfig().source.progressive,videoWindowWidth:t.player.getFigure().offsetWidth,videoWindowHeight:t.player.getFigure().offsetHeight,isMuted:t.player.isMuted(),autoplay:e})})),this.player.addEventHandler(this.player.EVENT.ON_CAST_START,(function(){t.eventCallback(ct.START_CAST)})),this.player.addEventHandler(this.player.EVENT.ON_CAST_STOP,(function(){t.eventCallback(ct.END_CAST)})),this.player.addEventHandler(this.player.EVENT.ON_PLAY,(function(){t.eventCallback(ct.PLAY,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_PAUSE,(function(){t.eventCallback(ct.PAUSE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_TIME_CHANGED,(function(){t.eventCallback(ct.TIMECHANGED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_SEEK,(function(){t.eventCallback(ct.SEEK,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_SEEKED,(function(){t.eventCallback(ct.SEEKED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_START_BUFFERING,(function(){t.eventCallback(ct.START_BUFFERING)})),this.player.addEventHandler(this.player.EVENT.ON_STOP_BUFFERING,(function(){t.eventCallback(ct.END_BUFFERING,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_AUDIO_PLAYBACK_QUALITY_CHANGE,(function(){var e=t.player.getPlaybackAudioData();t.eventCallback(ct.AUDIO_CHANGE,{bitrate:e.bitrate,currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_VIDEO_PLAYBACK_QUALITY_CHANGE,(function(){var e=t.player.getPlaybackVideoData();t.eventCallback(ct.VIDEO_CHANGE,{width:e.width,height:e.height,bitrate:e.bitrate,currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_FULLSCREEN_ENTER,(function(){t.eventCallback(ct.START_FULLSCREEN,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.onBeforeUnLoadEvent=!1,this.player.addEventHandler(this.player.EVENT.ON_FULLSCREEN_EXIT,(function(){t.eventCallback(ct.END_FULLSCREEN,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_AD_STARTED,(function(){t.eventCallback(ct.START_AD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_AD_FINISHED,(function(){t.eventCallback(ct.END_AD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_MUTE,(function(){t.eventCallback(ct.MUTE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_UNMUTE,(function(){t.eventCallback(ct.UN_MUTE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_ERROR,(function(e){t.eventCallback(ct.ERROR,{code:e.code,message:e.message})})),this.player.addEventHandler(this.player.EVENT.ON_PLAYBACK_FINISHED,(function(){t.eventCallback(ct.PLAYBACK_FINISHED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),"undefined"!=typeof window?window.onunload=window.onbeforeunload=function(){t.onBeforeUnLoadEvent||(t.onBeforeUnLoadEvent=!0,t.eventCallback(ct.UNLOAD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()}))}:this.onBeforeUnLoadEvent||(this.onBeforeUnLoadEvent=!0,this.eventCallback(ct.UNLOAD,{currentTime:this.player.getCurrentTime(),droppedFrames:this.player.getDroppedFrames()}))}}])&&Et(e.prototype,a),i&&Et(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function dt(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const mt=function(){function t(e,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.onBeforeUnLoadEvent=!1,this.player=e,this.eventCallback=a,this.register()}var e,a,i;return e=t,(a=[{key:"register",value:function(){var t=this,e=function(e){if(!e)return{progUrl:void 0,progBitrate:void 0};if("string"==typeof e)return{progUrl:e,progBitrate:0};if(Array.isArray(e)){var a=t.player.getPlaybackVideoData(),i=parseInt(a.id)||0;return{progUrl:e[i].url,progBitrate:e[i].bitrate||0}}return"object"===St(e)?{progUrl:e.url,progBitrate:e.bitrate||0}:void 0};this.player.addEventHandler(this.player.EVENT.ON_SOURCE_UNLOADED,(function(e){t.eventCallback(ct.SOURCE_UNLOADED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),this.player.addEventHandler(this.player.EVENT.ON_SOURCE_LOADED,(function(a){var i=!1;t.player.getConfig().playback&&t.player.getConfig().playback.autoplay&&(i=t.player.getConfig().playback.autoplay);var s=t.player.getConfig(),n={},r=e(s.source.progressive);s.source&&(n={mpdUrl:s.source.dash,m3u8Url:s.source.hls,progUrl:r.progUrl,progBitrate:r.progBitrate}),t.eventCallback(ct.SOURCE_LOADED,{isLive:t.player.isLive(),version:t.player.version,type:t.player.getPlayerType(),duration:t.player.getDuration(),streamType:t.player.getStreamType(),mpdUrl:n.mpdUrl,m3u8Url:n.m3u8Url,progUrl:n.progUrl,progBitrate:n.progBitrate,videoWindowWidth:t.player.getFigure().offsetWidth,videoWindowHeight:t.player.getFigure().offsetHeight,isMuted:t.player.isMuted(),autoplay:i})})),this.player.addEventHandler(this.player.EVENT.ON_READY,(function(){var a=!1;t.player.getConfig().playback&&t.player.getConfig().playback.autoplay&&(a=t.player.getConfig().playback.autoplay);var i=t.player.getConfig(),s={},n=e(i.source.progressive);i.source&&(s={videoId:i.source.videoId,userId:i.source.userId,mpdUrl:i.source.dash,m3u8Url:i.source.hls,progUrl:n.progUrl,progBitrate:n.progBitrate});var r=!0;null!=t.player.getConfig().adaptation.preload&&"boolean"==typeof t.player.getConfig().adaptation.preload&&(r=t.player.getConfig().adaptation.preload);var o=t.player.getAudio();o||(o="undetected"),t.eventCallback(ct.READY,{isLive:t.player.isLive(),version:t.player.version,type:t.player.getPlayerType(),duration:t.player.getDuration(),streamType:t.player.getStreamType(),videoId:s.videoId,userId:s.userId,mpdUrl:s.mpdUrl,m3u8Url:s.m3u8Url,progUrl:s.progUrl,progBitrate:s.progBitrate,videoWindowWidth:t.player.getFigure().offsetWidth,videoWindowHeight:t.player.getFigure().offsetHeight,isMuted:t.player.isMuted(),preload:r,audioLanguage:o,isFullScreen:t.player.isFullscreen(),autoplay:a})})),this.player.addEventHandler(this.player.EVENT.ON_CAST_STARTED,(function(e){t.eventCallback(ct.START_CAST,e)})),this.player.addEventHandler(this.player.EVENT.ON_CAST_STOPPED,(function(){t.eventCallback(ct.END_CAST,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_PLAY,(function(){t.eventCallback(ct.PLAY,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_PAUSED,(function(){t.eventCallback(ct.PAUSE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_TIME_CHANGED,(function(){t.eventCallback(ct.TIMECHANGED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_SEEK,(function(){t.eventCallback(ct.SEEK,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_SEEKED,(function(){t.eventCallback(ct.SEEKED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_STALL_STARTED,(function(){t.eventCallback(ct.START_BUFFERING,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_STALL_ENDED,(function(){t.eventCallback(ct.END_BUFFERING,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_AUDIO_PLAYBACK_QUALITY_CHANGED,(function(){var e=t.player.getPlaybackAudioData();t.eventCallback(ct.AUDIO_CHANGE,{bitrate:e.bitrate,currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_VIDEO_PLAYBACK_QUALITY_CHANGED,(function(){var e=t.player.getPlaybackVideoData();t.eventCallback(ct.VIDEO_CHANGE,{width:e.width,height:e.height,bitrate:e.bitrate,currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_FULLSCREEN_ENTER,(function(){t.eventCallback(ct.START_FULLSCREEN,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_FULLSCREEN_EXIT,(function(){t.eventCallback(ct.END_FULLSCREEN,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_AD_STARTED,(function(){t.eventCallback(ct.START_AD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_AD_FINISHED,(function(){t.eventCallback(ct.END_AD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_MUTED,(function(){t.eventCallback(ct.MUTE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_UNMUTED,(function(){t.eventCallback(ct.UN_MUTE,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames(),currentVideoData:t.player.getPlaybackVideoData(),isFullScreen:t.player.isFullscreen(),isCasting:t.player.isCasting()})})),this.player.addEventHandler(this.player.EVENT.ON_ERROR,(function(e){t.eventCallback(ct.ERROR,{code:e.code,message:e.message,currentTime:t.player.getCurrentTime()})})),this.player.addEventHandler(this.player.EVENT.ON_PLAYBACK_FINISHED,(function(){t.eventCallback(ct.PLAYBACK_FINISHED,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()})})),"undefined"!=typeof window?window.onunload=window.onbeforeunload=function(){t.onBeforeUnLoadEvent||(t.onBeforeUnLoadEvent=!0,t.eventCallback(ct.UNLOAD,{currentTime:t.player.getCurrentTime(),droppedFrames:t.player.getDroppedFrames()}))}:this.onBeforeUnLoadEvent||(this.onBeforeUnLoadEvent=!0,this.eventCallback(ct.UNLOAD,{currentTime:this.player.getCurrentTime(),droppedFrames:this.player.getDroppedFrames()}))}}])&&dt(e.prototype,a),i&&dt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ft(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function pt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ft(Object(a),!0).forEach((function(e){At(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ft(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function At(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function yt(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const _t=function(){function t(e,a,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.onBeforeUnLoadEvent=!1,this.player=e,this.eventCallback=a,this.stateMachine=i,this.register()}var e,a,i;return e=t,(a=[{key:"getStreamType",value:function(t){return t.endsWith(".m3u8")?"hls":t.endsWith(".mpd")?"dash":"progressive"}},{key:"getStreamSources",value:function(t){var e=null,a=null,i=null;switch(this.getStreamType(t)){case"hls":a=t;break;case"dash":e=t;break;default:i=t}return{mpdUrl:e,m3u8Url:a,progUrl:i}}},{key:"getVideoWindowDimensions",value:function(t){return{width:t.el_.clientWidth,height:t.el_.clientHeight}}},{key:"getVideoSourceDimensions",value:function(t){return{videoWidth:t.videoWidth(),videoHeight:t.videoHeight()}}},{key:"getVideojsSourceHandlerMode_",value:function(){var t=this.player.tech({IWillNotUseThisInPlugins:!0});return t.sourceHandler_?t.sourceHandler_.options_.mode:"native"}},{key:"register",value:function(){var t,e,a=this,i=this;this.player.on("loadedmetadata",(function(){var t=i.getStreamType(this.currentSrc()),e=i.getStreamSources(this.currentSrc()),a=i.getVideojsSourceHandlerMode_(),s=pt(pt(pt({isLive:this.duration()===1/0,version:videojs.VERSION,type:a,duration:this.duration(),streamType:t,autoplay:this.autoplay()},e),i.getVideoWindowDimensions(this)),{},{videoWindowWidth:this.videoWidth(),videoWindowHeight:this.videoHeight(),muted:this.muted()});i.stateMachine.updateMetadata(s),i.eventCallback(ct.SOURCE_LOADED,s)})),this.player.on("loadeddata",(function(){})),this.player.ready((function(){var t=i.getStreamType(this.currentSrc()),e=i.getStreamSources(this.currentSrc()),a=i.getVideojsSourceHandlerMode_(),s=i.getVideoWindowDimensions(this),n={width:null,height:null,bitrate:null};if(this.tech_.hls){var r=this.tech_.hls.playlists.media();if(r){var o=r.attributes;n.bitrate=o.BANDWIDTH,n.width=o.RESOLUTION.width,n.height=o.RESOLUTION.height,n.videoCodec=o.CODECS.split(",")[0],n.audioCodec=o.CODECS.split(",")[1]}}var l=pt(pt(pt({isLive:!1,version:videojs.VERSION,type:a,duration:this.duration(),streamType:t,autoplay:this.autoplay()},e),i.getVideoWindowDimensions(this)),{},{videoWindowWidth:s.width,videoWindowHeight:s.height,muted:this.muted(),currentVideoData:n});i.eventCallback(ct.READY,l)})),this.player.on("play",(function(){var t={width:null,height:null,bitrate:null};if(this.tech_.hls){var e=this.tech_.hls.playlists.media();if(e){var a=e.attributes;t.bitrate=a.BANDWIDTH,t.width=a.RESOLUTION.width,t.height=a.RESOLUTION.height,t.videoCodec=a.CODECS.split(",")[0],t.audioCodec=a.CODECS.split(",")[1]}}i.eventCallback(ct.PLAY,{currentTime:this.currentTime(),currentVideoData:t})})),this.player.on("pause",(function(){var t={width:null,height:null,bitrate:null};if(this.tech_.hls){var e=this.tech_.hls.playlists.media();if(e){var a=e.attributes;t.bitrate=a.BANDWIDTH,t.width=a.RESOLUTION.width,t.height=a.RESOLUTION.height,t.videoCodec=a.CODECS.split(",")[0],t.audioCodec=a.CODECS.split(",")[1]}}i.eventCallback(ct.PAUSE,{currentTime:this.currentTime(),currentVideoData:t})})),this.player.on("ended",(function(){var t={width:null,height:null,bitrate:null};if(this.tech_.hls){var e=this.tech_.hls.playlists.media();if(e){var a=e.attributes;t.bitrate=a.BANDWIDTH,t.width=a.RESOLUTION.width,t.height=a.RESOLUTION.height,t.videoCodec=a.CODECS.split(",")[0],t.audioCodec=a.CODECS.split(",")[1]}}i.eventCallback(ct.END,{currentTime:this.currentTime()})})),this.player.on("error",(function(){var t={width:null,height:null,bitrate:null};if(this.tech_.hls){var e=this.tech_.hls.playlists.media();if(e){var a=e.attributes;t.bitrate=a.BANDWIDTH,t.width=a.RESOLUTION.width,t.height=a.RESOLUTION.height}}var s=this.error();i.eventCallback(ct.ERROR,{currentTime:this.currentTime(),code:s.code,message:s.message})})),this.player.on("volumechange",(function(){var t={width:null,height:null,bitrate:null};if(this.tech_.hls){var e=this.tech_.hls.playlists.media();if(e){var a=e.attributes;t.bitrate=a.BANDWIDTH,t.width=a.RESOLUTION.width,t.height=a.RESOLUTION.height,t.videoCodec=a.CODECS.split(",")[0],t.audioCodec=a.CODECS.split(",")[1]}}this.muted()?i.eventCallback(ct.MUTE,{currentTime:this.currentTime(),currentVideoData:t}):i.eventCallback(ct.UN_MUTE,{currentTime:this.currentTime(),currentVideoData:t})})),this.player.on("seeking",(function(){var t={width:null,height:null,bitrate:null};if(this.tech_.hls){var e=this.tech_.hls.playlists.media();if(e){var a=e.attributes;t.bitrate=a.BANDWIDTH,t.width=a.RESOLUTION.width,t.height=a.RESOLUTION.height,t.videoCodec=a.CODECS.split(",")[0],t.audioCodec=a.CODECS.split(",")[1]}}i.eventCallback(ct.SEEK,{currentTime:this.currentTime(),droppedFrames:0,currentVideoData:t})})),this.player.on("seeked",(function(){var t={width:null,height:null,bitrate:null};if(this.tech_.hls){var e=this.tech_.hls.playlists.media();if(e){var a=e.attributes;t.bitrate=a.BANDWIDTH,t.width=a.RESOLUTION.width,t.height=a.RESOLUTION.height,t.videoCodec=a.CODECS.split(",")[0],t.audioCodec=a.CODECS.split(",")[1]}}i.eventCallback(ct.SEEKED,{currentTime:this.currentTime(),droppedFrames:0,currentVideoData:t})})),Date.now();var s=!1;this.player.on("timeupdate",(function(){var a=this;clearTimeout(e),s=!1,Date.now();var n={width:null,height:null,bitrate:null},r=null;if(this.tech_.hls&&(r=this.tech_.hls.playlists.media())){var o=r.attributes;n.bitrate=o.BANDWIDTH,n.width=o.RESOLUTION.width,n.height=o.RESOLUTION.height,n.videoCodec=o.CODECS.split(",")[0],n.audioCodec=o.CODECS.split(",")[1]}if(i.eventCallback(ct.TIMECHANGED,{currentTime:this.currentTime(),currentVideoData:n}),r){var l=r.attributes,u=l.BANDWIDTH,c=l.RESOLUTION.width,E=l.RESOLUTION.height,h=l.CODECS.split(",")[0],S=l.CODECS.split(",")[1];if(t!==u){var d={width:c,height:E,bitrate:u,videoCodec:h,audioCodec:S,currentTime:this.currentTime(),currentVideoData:n};i.eventCallback(ct.VIDEO_CHANGE,d),t=u}if(e=setTimeout((function(){(!a.paused()&&!a.ended()||s)&&i.eventCallback(ct.START_BUFFERING,{currentTime:a.currentTime()})}),1e3),this.tech({IWillNotUseThisInPlugins:!0}).hls){var m=this.tech_.hls;if(!m.playlists||"function"!=typeof m.playlists.media)return;var f=m.playlists.media();if(!f)return;var p=f.attributes,A=p.BANDWIDTH,y=p.RESOLUTION.width,_=p.RESOLUTION.height,N={width:y,height:_,bitrate:A,videoCodec:p.CODECS.split(",")[0],audioCodec:p.CODECS.split(",")[1]};if(isNaN(t)||t!==A){var v={width:y,height:_,bitrate:A,currentTime:this.currentTime(),currentVideoData:N};i.eventCallback(ct.VIDEO_CHANGE,v),t=A}}}})),this.player.on("stalled",(function(){s=!0})),"undefined"!=typeof window?window.onunload=window.onbeforeunload=function(){a.onBeforeUnLoadEvent||(a.onBeforeUnLoadEvent=!0,a.eventCallback(ct.UNLOAD,{currentTime:a.player.currentTime()}))}:this.onBeforeUnLoadEvent||(this.onBeforeUnLoadEvent=!0,this.eventCallback(ct.UNLOAD,{currentTime:this.player.currentTime()}))}}])&&yt(e.prototype,a),i&&yt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var Nt,vt="video/mp4",gt="video/webm",It="application/x-mpegURL",Dt="application/dash+xml",Tt=It,Pt=Dt;function Ct(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var Ut=gt,bt=Tt,Gt=Pt,Rt=(Ct(Nt={},vt,"mp4"),Ct(Nt,Ut,"webm"),Ct(Nt,bt,"hls"),Ct(Nt,Gt,"dash"),Nt);var Lt={BITMOVIN:"bitmovin",JW:"jw",RADIANT:"radiant",VIDEOJS:"videojs",HLSJS:"hlsjs",SHAKA:"shaka",DASHJS:"dashjs",HTML:"html5",REACTNATIVEVIDEO:"react-native-video"};function Yt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ot(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ft=function(){function t(e,a,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Yt(this,t),this.eventCallback=a,this.playerSoftwareName=s||Lt.HTML,this.stateMachine=i,this.mediaEl=e,this.mediaElEventHandlers=[],this.analyticsBitrate_=-1,this.audioCodec_="",this.videoCodec_="",this.bufferingTimeout_=null,this.isBuffering_=!1,this.isLive_=!1,this.isPaused_=!1,this.previousMediaTime_=null,this.needsReadyEvent_=!0,this.needsFirstPlayIntent_=!0,this.mediaElementSet_=!1,this.playbackReadySet_=!1,e&&this.setMediaElement()}var e,a,i;return e=t,a=[{key:"setMediaElement",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t&&this.mediaEl&&(this.unregisterMediaElement(),this.mediaElementSet_=!1),t&&(this.mediaEl=t),!this.mediaEl)throw new Error("No media element owned");if(this.mediaElementSet_)throw new Error("Media element already set (only call this once)");this.mediaElementSet_=!0,this.registerMediaElement(),this.onMaybeReady()}},{key:"getCurrentQualityLevelInfo",value:function(){return null}},{key:"isLive",value:function(){return!1}},{key:"getMIMEType",value:function(){var t,e=this.mediaEl,a="";return e||(a=null),a=e&&e.src?e.src:e&&e.querySelector("source")&&e.querySelector("source").src?e.querySelector("source").src:null,(t=(t=a).toLowerCase()).endsWith(".m3u8")?It:t.endsWith(".mp4")||t.endsWith(".m4v")||t.endsWith(".m4a")?vt:t.endsWith(".webm")?gt:t.endsWith(".mpd")?Dt:null}},{key:"getStreamType",value:function(){return t=this.getMIMEType(),Rt[t];var t}},{key:"getPlayerVersion",value:function(){return null}},{key:"getStreamURL",value:function(){var t=this.mediaEl;return t?t&&t.src?t.src:t&&t.querySelector("source")&&t.querySelector("source").src?t.querySelector("source").src:null:null}},{key:"resetMedia",value:function(){this.mediaEl=null,this.mediaElEventHandlers=[]}},{key:"registerMediaElement",value:function(){var t=this,e=this.mediaEl;e&&(this.listenToMediaElementEvent("loadedmetadata",(function(){if(1===e.readyState){t.checkQualityLevelAttributes(!0);var a=e.duration,i=e.autoplay,s=e.videoWidth,n=e.videoHeight,r=e.muted,o=e.clientWidth,l=e.clientHeight,u={type:"html5",isLive:t.isLive(),version:t.getPlayerVersion()||"html5",streamType:t.getStreamType(),streamUrl:t.getStreamURL(),duration:a,autoplay:i,currentVideoData:{height:n,width:s,bitrate:t.analyticsBitrate_,audioCodec:t.audioCodec_,videoCodec:t.videoCodec_},videoWindowWidth:parseInt(o),videoWindowHeight:parseInt(l),muted:r};t.needsFirstPlayIntent_||t.eventCallback(ct.METADATA_LOADED,u)}})),this.listenToMediaElementEvent("canplay",(function(){if(!t.playbackReadySet_){t.playbackReadySet_=!0;var a=e.duration,i=e.autoplay,s=e.videoWidth,n=e.videoHeight,r=e.muted,o=e.clientWidth,l=e.clientHeight,u={type:"html5",isLive:t.isLive(),version:t.getPlayerVersion()||"html5",streamType:t.getStreamType(),streamUrl:t.getStreamURL(),duration:a,autoplay:i,playerSoftware:t.playerSoftwareName,videoWindowWidth:parseInt(o),videoWindowHeight:parseInt(l),currentVideoData:{height:n,width:s,bitrate:t.analyticsBitrate_,audioCodec:t.audioCodec_,videoCodec:t.videoCodec_},muted:r};t.eventCallback(ct.SOURCE_LOADED,u)}})),this.listenToMediaElementEvent("play",(function(){var a=e.currentTime,i=e.videoWidth,s=e.videoHeight;t.needsFirstPlayIntent_=!1,t.eventCallback(ct.PLAY,{currentVideoData:{height:s,width:i,bitrate:t.analyticsBitrate_,audioCodec:t.audioCodec_,videoCodec:t.videoCodec_},currentTime:a})})),this.listenToMediaElementEvent("pause",(function(){t.onPaused()})),this.listenToMediaElementEvent("playing",(function(){var a=e.currentTime,i=e.videoWidth,s=e.videoHeight;t.isPaused_=!1,t.needsFirstPlayIntent_||t.eventCallback(ct.TIMECHANGED,{currentVideoData:{height:s,width:i,bitrate:t.analyticsBitrate_,audioCodec:t.audioCodec_,videoCodec:t.videoCodec_},currentTime:a})})),this.listenToMediaElementEvent("error",(function(){var a=e.currentTime,i=e.error;t.eventCallback(ct.ERROR,{currentTime:a,code:i.code,message:i.message})})),this.listenToMediaElementEvent("volumechange",(function(){var a=e.muted,i=e.currentTime;a?t.eventCallback(ct.MUTE,{currentTime:i}):t.eventCallback(ct.UN_MUTE,{currentTime:i})})),this.listenToMediaElementEvent("seeking",(function(){var a=e.currentTime,i=e.videoWidth,s=e.videoHeight;t.eventCallback(ct.SEEK,{currentVideoData:{height:s,width:i,bitrate:t.analyticsBitrate_,audioCodec:t.audioCodec_,videoCodec:t.videoCodec_},currentTime:a,droppedFrames:0})})),this.listenToMediaElementEvent("seeked",(function(){var a=e.currentTime,i=e.videoWidth,s=e.videoHeight;t.bufferingTimeout_&&clearTimeout(t.bufferingTimeout_),t.eventCallback(ct.SEEKED,{currentVideoData:{height:s,width:i,bitrate:t.analyticsBitrate_,audioCodec:t.audioCodec_,videoCodec:t.videoCodec_},currentTime:a,droppedFrames:0})})),this.listenToMediaElementEvent("ended",(function(){var a=e.currentTime,i=e.videoWidth,s=e.videoHeight;t.eventCallback(ct.END,{currentVideoData:{height:s,width:i,bitrate:t.analyticsBitrate_,audioCodec:t.audioCodec_,videoCodec:t.videoCodec_},currentTime:a})})),this.listenToMediaElementEvent("timeupdate",(function(){var a=e.currentTime,i=e.videoHeight,s=e.videoWidth;t.isBuffering_=!1,t.needsFirstPlayIntent_||(t.isPaused_||t.eventCallback(ct.TIMECHANGED,{currentVideoData:{height:i,width:s,bitrate:t.analyticsBitrate_,audioCodec:t.audioCodec_,videoCodec:t.videoCodec_},currentTime:a}),t.checkQualityLevelAttributes(),t.checkPlayheadProgress(),t.previousMediaTime_=a)})),this.listenToMediaElementEvent("stalled",(function(){})),this.listenToMediaElementEvent("waiting",(function(){t.onBuffering()})))}},{key:"listenToMediaElementEvent",value:function(t,e){if(!this.mediaEl)throw new Error("No media attached");var a=e.bind(this);this.mediaElEventHandlers.push(a),this.mediaEl.addEventListener(t,a,!1)}},{key:"onMaybeReady",value:function(){if(this.needsReadyEvent_&&this.mediaEl){this.needsReadyEvent_=!1;var t=!1,e=this.mediaEl,a=e.duration,i=e.autoplay,s=e.videoWidth,n=e.videoHeight,r=e.muted,o=e.preload;this.mediaEl&&this.mediaEl.src?this.mediaEl.src:this.mediaEl&&this.mediaEl.querySelector("source")&&this.mediaEl.querySelector("source").src&&this.mediaEl.querySelector("source").src;var l=this.mediaEl.clientWidth,u=this.mediaEl.clientHeight;"none"!==o&&(t=!0);var c={type:"html5",isLive:this.isLive(),version:this.getPlayerVersion()||"html5",streamType:this.getStreamType(),streamUrl:this.getStreamURL(),duration:a,autoplay:i,preload:t,playerSoftware:this.playerSoftwareName,currentVideoData:{height:n,width:s,bitrate:this.analyticsBitrate_,audioCodec:this.audioCodec_,videoCodec:this.videoCodec_},videoWindowWidth:parseInt(l),videoWindowHeight:parseInt(u),muted:r};this.stateMachine.updateMetadata(c),this.eventCallback(ct.READY,c)}}},{key:"unregisterMediaElement",value:function(){var t=this;if(!this.mediaEl)throw new Error("No media attached");this.mediaElEventHandlers.forEach((function(e){t.mediaEl.removeEventListener(e)})),this.resetMedia()}},{key:"onBuffering",value:function(){var t=this.mediaEl.currentTime;this.isBuffering_||this.isPaused_||(this.eventCallback(ct.START_BUFFERING,{currentTime:t}),this.isBuffering_=!0)}},{key:"onPaused",value:function(){if(!this.isPaused_){var t=this.mediaEl,e=t.currentTime,a=t.videoHeight,i=t.videoWidth;this.eventCallback(ct.PAUSE,{currentVideoData:{height:a,width:i,bitrate:this.analyticsBitrate_,audioCodec:this.audioCodec_,videoCodec:this.videoCodec_},currentTime:e}),this.isPaused_=!0}}},{key:"checkPlayheadProgress",value:function(){var t=this,e=this.mediaEl;e.paused&&this.onPaused(),this.bufferingTimeout_&&clearTimeout(this.bufferingTimeout_),this.bufferingTimeout_=setTimeout((function(){e.paused||e.ended&&!t.isBuffering_||e.currentTime-t.previousMediaTime_<1e3&&t.onBuffering()}),1e3)}},{key:"checkQualityLevelAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.mediaEl,a=this.getCurrentQualityLevelInfo();if(a){var i=a.bitrate,s=a.width,n=a.height,r=a.videoCodec,o=a.audioCodec,l=this.isLive();if(l!==this.isLive_&&(this.isLive_=l,t||this.stateMachine.updateMetadata({isLive:l})),this.audioCodec_=o,this.videoCodec_=r,this.analyticsBitrate_!==i){var u={width:s,height:n,bitrate:i,videoCodec:r,audioCodec:o,currentTime:e.currentTime};t||this.eventCallback(ct.VIDEO_CHANGE,u),this.analyticsBitrate_=i}}}}],a&&Ot(e.prototype,a),i&&Ot(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function kt(t){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kt(t)}function wt(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Mt(t,e){return Mt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Mt(t,e)}function Ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,i=Vt(t);if(e){var s=Vt(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return Kt(this,a)}}function Kt(t,e){if(e&&("object"===kt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Vt(t){return Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Vt(t)}var Bt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mt(t,e)}(n,t);var e,a,i,s=Ht(n);function n(t,e,a){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(i=s.call(this,null,e,a,Lt.HLSJS)).hls=t,i.playerSoftwareName=Lt.HLSJS,i.resetMedia(),i.registerHlsEvents(),i}return e=n,(a=[{key:"getCurrentQualityLevelInfo",value:function(){var t=this.hls,e=t.levels[t.currentLevel];if(e){var a=e.attrs,i=parseInt(a.BANDWIDTH,10),s=parseInt(a.RESOLUTION.width,10),n=parseInt(a.RESOLUTION.height,10),r=null,o=null;return a.CODECS&&(r=a.CODECS.split(",").length>1?a.CODECS.split(",")[1]:"",o=a.CODECS.split(",").length>1?a.CODECS.split(",")[0]:""),{bitrate:i,width:s,height:n,audioCodec:r,videoCodec:o}}}},{key:"isLive",value:function(){var t=this.hls;if(t.currentLevel<0)return!1;var e=t.levels[t.currentLevel];return!!e&&e.details.live}},{key:"getPlayerVersion",value:function(){return Hls.version}},{key:"getMIMEType",value:function(){return Tt}},{key:"getStreamURL",value:function(){return this.hls.url}},{key:"registerHlsEvents",value:function(){var t=this.hls;if(!Hls)throw new Error("Hls.js is not defined installed (must be loaded before analytics module)");t.on(Hls.Events.MEDIA_ATTACHING,this.onMediaAttaching.bind(this)),t.on(Hls.Events.MEDIA_DETACHING,this.onMediaDetaching.bind(this)),t.on(Hls.Events.MANIFEST_LOADING,this.onManifestLoading.bind(this)),t.media&&this.onMediaAttaching(),t.url&&this.onManifestLoading()}},{key:"onMediaAttaching",value:function(){this.mediaEl||(this.mediaEl=this.hls.media,this.registerMediaElement(),this.onMaybeReady())}},{key:"onMediaDetaching",value:function(){this.unregisterMediaElement()}},{key:"onManifestLoading",value:function(){this.onMaybeReady()}}])&&wt(e.prototype,a),i&&wt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),n}(Ft);function jt(t){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(t)}function xt(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Qt(t,e){return Qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Qt(t,e)}function Wt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,i=Jt(t);if(e){var s=Jt(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return qt(this,a)}}function qt(t,e){if(e&&("object"===jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Jt(t){return Jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Jt(t)}var $t=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qt(t,e)}(n,t);var e,a,i,s=Wt(n);function n(t,e,a,i){var r;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),r=s.call(this,i,e,a,Lt.SHAKA),!shaka)throw new Error("`shaka` lib is not installed (must be loaded before analytics module)");return r.shakaPlayer=t,r.playerSoftwareName=Lt.SHAKA,r}return e=n,(a=[{key:"getPlayerVersion",value:function(){return shaka.Player.version}},{key:"isLive",value:function(){return!!this.shakaPlayer&&this.shakaPlayer.isLive()}},{key:"getMIMEType",value:function(){return Pt}},{key:"getStreamURL",value:function(){return this.shakaPlayer?this.shakaPlayer.getAssetUri():null}},{key:"getCurrentQualityLevelInfo",value:function(){var t=this.shakaPlayer.getVariantTracks().filter((function(t){return t.active})).filter((function(t){return t.videoCodec||void 0!==t.videoId}))[0];return t?{bitrate:t.videoBandwidth||t.bandwidth,width:t.width,height:t.height,videoCodec:t.videoCodec,audioCodec:t.audioCodec}:null}}])&&xt(e.prototype,a),i&&xt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),n}(Ft);function Xt(t){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xt(t)}function zt(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Zt(t,e){return Zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Zt(t,e)}function te(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,i=ie(t);if(e){var s=ie(this).constructor;a=Reflect.construct(i,arguments,s)}else a=i.apply(this,arguments);return ee(this,a)}}function ee(t,e){if(e&&("object"===Xt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ae(t)}function ae(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ie(t){return ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ie(t)}var se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zt(t,e)}(n,t);var e,a,i,s=te(n);function n(t,e,a){var i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),i=s.call(this,null,e,a,Lt.DASHJS);var r=null,o=!1;i.playerSoftwareName=Lt.DASHJS;try{r=t.getVideoElement()}catch(t){}return r?i._initialize(t,r):t.on(dashjs.MediaPlayer.events.CAN_PLAY,(function(){if(!o){r=t.getVideoElement(),o=!0,i._initialize(t,r);var e=r,a=e.duration,s=e.autoplay,n=e.videoWidth,l=e.videoHeight,u=e.muted,c=r.clientWidth,E=r.clientHeight,h={type:"html5",isLive:i.isLive(),version:i.getPlayerVersion()||"html5",streamType:i.getStreamType(),streamUrl:i.getStreamURL(),duration:a,autoplay:s,playerSoftware:i.playerSoftwareName,videoWindowWidth:parseInt(c),videoWindowHeight:parseInt(E),currentVideoData:{height:l,width:n,bitrate:i.analyticsBitrate_,audioCodec:i.audioCodec_,videoCodec:i.videoCodec_},muted:u};i.eventCallback(ct.SOURCE_LOADED,h)}}),ae(i)),i}return e=n,(a=[{key:"_initialize",value:function(t,e){this.mediaPlayer=t,this.setMediaElement(e)}},{key:"getPlayerVersion",value:function(){return this.mediaPlayer.getVersion()}},{key:"isLive",value:function(){return!1}},{key:"getMIMEType",value:function(){return Pt}},{key:"getStreamURL",value:function(){return this.mediaPlayer?this.mediaPlayer.getSource():null}},{key:"getCurrentQualityLevelInfo",value:function(){if(this.mediaPlayer){var t=this.mediaPlayer.getBitrateInfoListFor("video")[this.mediaPlayer.getQualityFor("video")],e=this.mediaPlayer.getCurrentTrackFor("video"),a=this.mediaPlayer.getCurrentTrackFor("audio"),i=t.width,s=t.height,n=t.bitrate,r=null,o=null;return e&&(o=e.codec.split('"').length>0?e.codec.split('"')[1]:e.codec),a&&(r=a.codec.split('"').length>0?a.codec.split('"')[1]:a.codec),{width:i,height:s,bitrate:n,audioCodec:r,videoCodec:o}}return null}}])&&zt(e.prototype,a),i&&zt(e,i),Object.defineProperty(e,"prototype",{writable:!1}),n}(Ft);function ne(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const re=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,a,i;return e=t,i=[{key:"getAdapter",value:function(t,e,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return ut.isBitmovinVersionPre7(t)?new ht(t,e):ut.isBitmovinVersion7Plus(t)?new mt(t,e):ut.isVideoJs(t)?new _t(t,e,a):ut.isHlsjs(t)?new Bt(t,e,a):ut.isShaka(t)?new $t(t,e,a,i):ut.isDashjs(t)?new se(t,e,a):new Ft(t,e,a)}}],(a=null)&&ne(e.prototype,a),i&&ne(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();var oe=a(363),le=a.n(oe);function ue(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ce(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var Ee=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stateMachineCallbacks=e,this.pausedTimestamp=null,this.seekTimestamp=0,this.seekedTimestamp=0,this.seekedTimeout=0,this.onEnterStateTimestamp=0,this.States={SETUP:"SETUP",STARTUP:"STARTUP",READY:"READY",PLAYING:"PLAYING",REBUFFERING:"REBUFFERING",PAUSE:"PAUSE",QUALITYCHANGE:"QUALITYCHANGE",PAUSED_SEEKING:"PAUSED_SEEKING",PLAY_SEEKING:"PLAY_SEEKING",END_PLAY_SEEKING:"END_PLAY_SEEKING",QUALITYCHANGE_PAUSE:"QUALITYCHANGE_PAUSE",END:"END",ERROR:"ERROR",AD:"AD",MUTING_READY:"MUTING_READY",MUTING_PLAY:"MUTING_PLAY",MUTING_PAUSE:"MUTING_PAUSE"},this.createStateMachine()}var e,a,i;return e=t,i=[{key:"pad",value:function(t,e){return(t+new Array(e).join(" ")).slice(0,e)}}],(a=[{key:"createStateMachine",value:function(){var e=this;this.stateMachine=le().create({initial:this.States.SETUP,error:function(t,e,a,i,s,n,r){nt.error(n)},events:[{name:ct.READY,from:[this.States.SETUP,this.States.ERROR],to:this.States.READY},{name:ct.PLAY,from:this.States.READY,to:this.States.STARTUP},{name:ct.START_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.END_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.TIMECHANGED,from:this.States.STARTUP,to:this.States.PLAYING},{name:ct.TIMECHANGED,from:this.States.PLAYING,to:this.States.PLAYING},{name:ct.END_BUFFERING,from:this.States.PLAYING,to:this.States.PLAYING},{name:ct.START_BUFFERING,from:this.States.PLAYING,to:this.States.REBUFFERING},{name:ct.END_BUFFERING,from:this.States.REBUFFERING,to:this.States.PLAYING},{name:ct.TIMECHANGED,from:this.States.REBUFFERING,to:this.States.REBUFFERING},{name:ct.PAUSE,from:this.States.PLAYING,to:this.States.PAUSE},{name:ct.PAUSE,from:this.States.REBUFFERING,to:this.States.PAUSE},{name:ct.PLAY,from:this.States.PAUSE,to:this.States.PLAYING},{name:ct.VIDEO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:ct.AUDIO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:ct.VIDEO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:ct.AUDIO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:this.States.QUALITYCHANGE,to:this.States.PLAYING},{name:ct.VIDEO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ct.AUDIO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ct.VIDEO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ct.AUDIO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:this.States.QUALITYCHANGE_PAUSE,to:this.States.PAUSE},{name:ct.SEEK,from:this.States.PAUSE,to:this.States.PAUSED_SEEKING},{name:ct.SEEK,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.AUDIO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.VIDEO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.START_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.END_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.SEEKED,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:ct.PLAY,from:this.States.PAUSED_SEEKING,to:this.States.PLAYING},{name:ct.PAUSE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:"PLAY_SEEK",from:this.States.PAUSE,to:this.States.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.States.PAUSED_SEEKING,to:this.States.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.SEEK,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.AUDIO_CHANGE,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.VIDEO_CHANGE,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.START_BUFFERING,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.END_BUFFERING,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.SEEKED,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.PLAY,from:this.States.PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ct.START_BUFFERING,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ct.END_BUFFERING,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ct.SEEKED,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ct.TIMECHANGED,from:this.States.END_PLAY_SEEKING,to:this.States.PLAYING},{name:ct.END,from:this.States.PLAY_SEEKING,to:this.States.END},{name:ct.END,from:this.States.PAUSED_SEEKING,to:this.States.END},{name:ct.END,from:this.States.PLAYING,to:this.States.END},{name:ct.END,from:this.States.PAUSE,to:this.States.END},{name:ct.SEEK,from:this.States.END,to:this.States.END},{name:ct.SEEKED,from:this.States.END,to:this.States.END},{name:ct.TIMECHANGED,from:this.States.END,to:this.States.END},{name:ct.END_BUFFERING,from:this.States.END,to:this.States.END},{name:ct.START_BUFFERING,from:this.States.END,to:this.States.END},{name:ct.END,from:this.States.END,to:this.States.END},{name:ct.PLAY,from:this.States.END,to:this.States.PLAYING},{name:ct.ERROR,from:[this.States.SETUP,this.States.STARTUP,this.States.READY,this.States.PLAYING,this.States.REBUFFERING,this.States.PAUSE,this.States.QUALITYCHANGE,this.States.PAUSED_SEEKING,this.States.PLAY_SEEKING,this.States.END_PLAY_SEEKING,this.States.QUALITYCHANGE_PAUSE,"FINISH_PLAY_SEEKING","PLAY_SEEK","FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE",this.States.END,this.States.ERROR],to:this.States.ERROR},{name:ct.SEEK,from:this.States.END_PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:"FINISH_PLAY_SEEKING",from:this.States.END_PLAY_SEEKING,to:this.States.PLAYING},{name:ct.UNLOAD,from:[this.States.PLAYING,this.States.PAUSE],to:this.States.END},{name:ct.START_AD,from:this.States.PLAYING,to:this.States.AD},{name:ct.END_AD,from:this.States.AD,to:this.States.PLAYING},{name:ct.MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:ct.UN_MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:"FINISH_MUTING",from:this.States.MUTING_READY,to:this.States.READY},{name:ct.MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:ct.UN_MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:"FINISH_MUTING",from:this.States.MUTING_PLAY,to:this.States.PLAYING},{name:ct.MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:ct.UN_MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:"FINISH_MUTING",from:this.States.MUTING_PAUSE,to:this.States.PAUSE}],callbacks:{onpause:function(t,a,i,s){a===e.States.PLAYING&&(e.pausedTimestamp=s)},onbeforeevent:function(a,i,s,n,r){return a===ct.SEEK&&i===e.States.PAUSE&&n-e.pausedTimestamp<t.PAUSE_SEEK_DELAY?(e.stateMachine.PLAY_SEEK(n),!1):(a===ct.SEEK&&clearTimeout(e.seekedTimeout),a===ct.SEEKED&&i===e.States.PAUSED_SEEKING?(e.seekedTimestamp=n,e.seekedTimeout=setTimeout((function(){e.stateMachine.pause(n,r)}),t.SEEKED_PAUSE_DELAY),!1):void 0)},onafterevent:function(a,i,s,n){nt.log(t.pad(n,20)+"EVENT: "+t.pad(a,20)+" from "+t.pad(i,14)+"-> "+t.pad(s,14)),s===e.States.QUALITYCHANGE_PAUSE&&e.stateMachine.FINISH_QUALITYCHANGE_PAUSE(n),s===e.States.QUALITYCHANGE&&e.stateMachine.FINISH_QUALITYCHANGE(n),s!==e.States.MUTING_READY&&s!==e.States.MUTING_PLAY&&s!==e.States.MUTING_PAUSE||e.stateMachine.FINISH_MUTING(n)},onenterstate:function(t,a,i,s,n){e.onEnterStateTimestamp=s||(new Date).getTime(),nt.log("Entering State "+i+" with "+t),n&&i!==e.States.PAUSED_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(n)},onleavestate:function(t,a,i,s,n){if(s){var r=s-e.onEnterStateTimestamp;nt.log("State "+a+" was "+r+" ms event:"+t),n&&i!==e.States.PAUSED_SEEKING&&e.stateMachineCallbacks.setVideoTimeEndFromEvent(n);var o=a.toLowerCase();if(a===e.States.END_PLAY_SEEKING||a===e.States.PAUSED_SEEKING){var l=e.seekedTimestamp-e.seekTimestamp;e.stateMachineCallbacks[o](l,o,n),nt.log("Seek was "+l+"ms")}else if(t===ct.UNLOAD&&a===e.States.PLAYING)e.stateMachineCallbacks.playingAndBye(r,o,n);else if(a===e.States.PAUSE&&i!==e.States.PAUSED_SEEKING)e.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.stateMachineCallbacks.pause(r,o,n);else{var u=e.stateMachineCallbacks[o];"function"==typeof u?u(r,o,n):nt.error("Could not find callback function for "+o)}n&&i!==e.States.PAUSED_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(n),t===ct.VIDEO_CHANGE?e.stateMachineCallbacks.videoChange(n):t===ct.AUDIO_CHANGE?e.stateMachineCallbacks.audioChange(n):t===ct.MUTE?(nt.log("Setting sample to muted"),e.stateMachineCallbacks.mute()):t===ct.UN_MUTE&&(nt.log("Setting sample to unmuted"),e.stateMachineCallbacks.unMute())}},onseek:function(t,a,i,s){e.seekTimestamp=s},onseeked:function(t,a,i,s){e.seekedTimestamp=s},ontimechanged:function(t,a,i,s,n){var r=s-e.onEnterStateTimestamp;r>59700&&(e.stateMachineCallbacks.setVideoTimeEndFromEvent(n),nt.log("Sending heartbeat"),e.stateMachineCallbacks.heartbeat(r,a.toLowerCase(),n),e.onEnterStateTimestamp=s,e.stateMachineCallbacks.setVideoTimeStartFromEvent(n))},onplayerError:function(t,a,i,s,n){e.stateMachineCallbacks.error(n)}}})}},{key:"callEvent",value:function(t,e,a){var i=this.stateMachine[t];i?i.call(this.stateMachine,a,e):nt.log("Ignored Event: "+t)}}])&&ue(e.prototype,a),i&&ue(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function he(t){return function(t){if(Array.isArray(t))return Se(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Se(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Se(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function de(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function me(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function fe(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}ce(Ee,"PAUSE_SEEK_DELAY",60),ce(Ee,"SEEKED_PAUSE_DELAY",120);var pe=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};de(this,t),this.stateMachineCallbacks=e,this.pausedTimestamp=null,this.seekTimestamp=0,this.seekedTimestamp=0,this.seekedTimeout=0,this.seekedFrom=0,this.onEnterStateTimestamp=0,this.lastPlayHeadDuration=0,this.States={SETUP:"SETUP",STARTUP:"STARTUP",READY:"READY",PLAYING:"PLAYING",REBUFFERING:"REBUFFERING",PAUSE:"PAUSE",QUALITYCHANGE:"QUALITYCHANGE",PAUSED_SEEKING:"PAUSED_SEEKING",PLAY_SEEKING:"PLAY_SEEKING",END_PLAY_SEEKING:"END_PLAY_SEEKING",QUALITYCHANGE_PAUSE:"QUALITYCHANGE_PAUSE",QUALITYCHANGE_REBUFFERING:"QUALITYCHANGE_REBUFFERING",END:"END",ERROR:"ERROR",AD:"AD",MUTING_READY:"MUTING_READY",MUTING_PLAY:"MUTING_PLAY",MUTING_PAUSE:"MUTING_PAUSE",CASTING:"CASTING",SOURCE_CHANGING:"SOURCE_CHANGING"},this.createStateMachine(a)}var e,a,i;return e=t,a=[{key:"getAllStates",value:function(){var t=this;return[].concat(he(Object.keys(this.States).map((function(e){return t.States[e]}))),["FINISH_PLAY_SEEKING","PLAY_SEEK","FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE","FINISH_QUALITYCHANGE_REBUFFERING"])}},{key:"createStateMachine",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.stateMachine=le().create({initial:this.States.SETUP,error:function(t,e,a,i,s,n){nt.error("Error in statemachine: "+n)},events:[{name:ct.READY,from:[this.States.SETUP,this.States.ERROR],to:this.States.READY},{name:ct.PLAY,from:this.States.READY,to:this.States.STARTUP},{name:ct.START_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.END_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.VIDEO_CHANGE,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.AUDIO_CHANGE,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.TIMECHANGED,from:this.States.STARTUP,to:this.States.PLAYING},{name:ct.TIMECHANGED,from:this.States.PLAYING,to:this.States.PLAYING},{name:ct.END_BUFFERING,from:this.States.PLAYING,to:this.States.PLAYING},{name:ct.START_BUFFERING,from:this.States.PLAYING,to:this.States.REBUFFERING},{name:ct.END_BUFFERING,from:this.States.REBUFFERING,to:this.States.PLAYING},{name:ct.TIMECHANGED,from:this.States.REBUFFERING,to:this.States.REBUFFERING},{name:ct.PAUSE,from:this.States.PLAYING,to:this.States.PAUSE},{name:ct.PAUSE,from:this.States.REBUFFERING,to:this.States.PAUSE},{name:ct.PLAY,from:this.States.PAUSE,to:this.States.PLAYING},{name:ct.VIDEO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:ct.AUDIO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:ct.VIDEO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:ct.AUDIO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:this.States.QUALITYCHANGE,to:this.States.PLAYING},{name:ct.VIDEO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ct.AUDIO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ct.VIDEO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ct.AUDIO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:this.States.QUALITYCHANGE_PAUSE,to:this.States.PAUSE},{name:ct.SEEK,from:this.States.PAUSE,to:this.States.PAUSED_SEEKING},{name:ct.SEEK,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.AUDIO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.VIDEO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.START_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.END_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.SEEKED,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:ct.PLAY,from:this.States.PAUSED_SEEKING,to:this.States.PLAYING},{name:ct.PAUSE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:"PLAY_SEEK",from:this.States.PAUSE,to:this.States.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.States.PAUSED_SEEKING,to:this.States.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.SEEK,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.AUDIO_CHANGE,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.VIDEO_CHANGE,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.START_BUFFERING,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.END_BUFFERING,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.SEEKED,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.PLAY,from:this.States.PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ct.START_BUFFERING,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ct.END_BUFFERING,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ct.SEEKED,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ct.TIMECHANGED,from:this.States.END_PLAY_SEEKING,to:this.States.PLAYING},{name:ct.END,from:this.States.PLAY_SEEKING,to:this.States.END},{name:ct.END,from:this.States.PAUSED_SEEKING,to:this.States.END},{name:ct.END,from:this.States.PLAYING,to:this.States.END},{name:ct.END,from:this.States.PAUSE,to:this.States.END},{name:ct.SEEK,from:this.States.END,to:this.States.END},{name:ct.SEEKED,from:this.States.END,to:this.States.END},{name:ct.TIMECHANGED,from:this.States.END,to:this.States.END},{name:ct.END_BUFFERING,from:this.States.END,to:this.States.END},{name:ct.START_BUFFERING,from:this.States.END,to:this.States.END},{name:ct.END,from:this.States.END,to:this.States.END},{name:ct.PLAY,from:this.States.END,to:this.States.PLAYING},{name:ct.ERROR,from:this.getAllStates(),to:this.States.ERROR},{name:ct.SEEK,from:this.States.END_PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:"FINISH_PLAY_SEEKING",from:this.States.END_PLAY_SEEKING,to:this.States.PLAYING},{name:ct.UNLOAD,from:this.getAllStates(),to:this.States.END},{name:ct.START_AD,from:this.States.PLAYING,to:this.States.AD},{name:ct.END_AD,from:this.States.AD,to:this.States.PLAYING},{name:ct.MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:ct.UN_MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:"FINISH_MUTING",from:this.States.MUTING_READY,to:this.States.READY},{name:ct.MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:ct.UN_MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:"FINISH_MUTING",from:this.States.MUTING_PLAY,to:this.States.PLAYING},{name:ct.MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:ct.UN_MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:"FINISH_MUTING",from:this.States.MUTING_PAUSE,to:this.States.PAUSE},{name:ct.START_CAST,from:[this.States.READY,this.States.PAUSE],to:this.States.CASTING},{name:ct.PAUSE,from:this.States.CASTING,to:this.States.CASTING},{name:ct.PLAY,from:this.States.CASTING,to:this.States.CASTING},{name:ct.TIMECHANGED,from:this.States.CASTING,to:this.States.CASTING},{name:ct.MUTE,from:this.States.CASTING,to:this.States.CASTING},{name:ct.SEEK,from:this.States.CASTING,to:this.States.CASTING},{name:ct.SEEKED,from:this.States.CASTING,to:this.States.CASTING},{name:ct.END_CAST,from:this.States.CASTING,to:this.States.READY},{name:ct.SEEK,from:this.States.READY,to:this.States.READY},{name:ct.SEEKED,from:this.States.READY,to:this.States.READY},{name:ct.SEEKED,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.SOURCE_UNLOADED,from:this.getAllStates(),to:this.States.SOURCE_CHANGING},{name:ct.READY,from:this.States.SOURCE_CHANGING,to:this.States.READY},{name:ct.SOURCE_LOADED,from:this.States.SETUP,to:this.States.SETUP},{name:ct.SOURCE_LOADED,from:this.States.READY,to:this.States.READY},{name:ct.VIDEO_CHANGE,from:this.States.REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:ct.AUDIO_CHANGE,from:this.States.REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:ct.VIDEO_CHANGE,from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:ct.AUDIO_CHANGE,from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.REBUFFERING}],callbacks:{onpause:function(t,a,i,s){a===e.States.PLAYING&&(e.pausedTimestamp=s)},onbeforeevent:function(a,i,s,n,r){return a===ct.SEEK&&i===e.States.PAUSE&&(e.seekedFrom=e.lastPlayHeadDuration,e.seekTimestamp=n,n-e.pausedTimestamp<t.PAUSE_SEEK_DELAY)?(e.stateMachine.PLAY_SEEK(n),!1):(a===ct.SEEK&&clearTimeout(e.seekedTimeout),a!==ct.SOURCE_LOADED?a===ct.SEEKED&&i===e.States.PAUSED_SEEKING?(e.seekedTimestamp=n,e.seekedTimeout=setTimeout((function(){e.stateMachine.pause(n,r)}),t.SEEKED_PAUSE_DELAY),!1):(i!==e.States.REBUFFERING||s!==e.States.QUALITYCHANGE_REBUFFERING)&&void(r&&(e.lastPlayHeadDuration=1e3*r.currentTime)):void e.stateMachineCallbacks.loaded(n,e.States.READY,r))},onafterevent:function(t,a,i,s){i===e.States.QUALITYCHANGE_PAUSE&&e.stateMachine.FINISH_QUALITYCHANGE_PAUSE(s),i===e.States.QUALITYCHANGE&&e.stateMachine.FINISH_QUALITYCHANGE(s),i===e.States.QUALITYCHANGE_REBUFFERING&&e.stateMachine.FINISH_QUALITYCHANGE_REBUFFERING(s),i!==e.States.MUTING_READY&&i!==e.States.MUTING_PLAY&&i!==e.States.MUTING_PAUSE||e.stateMachine.FINISH_MUTING(s)},onenterstate:function(t,i,s,n,r){s===e.States.SETUP?e.stateMachineCallbacks.setup(n,e.States.SETUP,r):s===e.States.READY?(r.playerSoftware="Bitmovin",e.stateMachineCallbacks.ready(n,e.States.READY,r)):"play"===t&&s===e.States.STARTUP?e.stateMachineCallbacks.first_play(n,e.States.PLAY,r):"play"===t&&i===e.States.PAUSE?(e.stateMachineCallbacks.play(n,e.States.PLAY,r),e.stateMachineCallbacks.playing(n,e.States.PLAYING,r)):"timechanged"===t&&i===e.States.STARTUP&&s===e.States.PLAYING?(e.stateMachineCallbacks.playing(n,e.States.PLAYING,r),e.stateMachineCallbacks.playback_started(r)):s===e.States.PAUSE&&i===e.States.PLAYING?e.stateMachineCallbacks.pause(n,e.States.PAUSE,r):s===e.States.END?e.stateMachineCallbacks.end(n,e.States.END,r):s===e.States.END?e.stateMachineCallbacks.mute(n,r):t===ct.START_BUFFERING?e.stateMachineCallbacks.start_rebuffer(n,e.States.REBUFFERING,r):t===ct.END_BUFFERING&&e.stateMachineCallbacks.end_rebuffer(n,e.States.REBUFFERING,r),"none"===i&&a.starttime?e.onEnterStateTimestamp=a.starttime:e.onEnterStateTimestamp=n||(new Date).getTime(),r&&s!==e.States.PAUSED_SEEKING&&s!==e.States.PLAY_SEEKING&&s!==e.States.END_PLAY_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(r),"PLAY_SEEK"===t&&s===e.States.PLAY_SEEKING&&s!==e.States.PLAY_SEEKING&&s!==e.States.END_PLAY_SEEKING&&(e.seekTimestamp=e.onEnterStateTimestamp)},onleavestate:function(t,a,i,s,n){if(s){var r=s-e.onEnterStateTimestamp;if(n&&i!==e.States.PAUSED_SEEKING&&i!==e.States.PLAY_SEEKING&&i!==e.States.END_PLAY_SEEKING&&(nt.log("Setting video time end to "+n.currentTime+", going to "+i),e.stateMachineCallbacks.setVideoTimeEndFromEvent(n)),"PLAY_SEEK"===t&&a===e.States.PAUSE)return!0;var o=a.toLowerCase();if(a===e.States.END_PLAY_SEEKING||a===e.States.PAUSED_SEEKING){var l=e.seekedTimestamp-e.seekTimestamp;e.stateMachineCallbacks.playback_seeked(e.seekedFrom,1e3*n.currentTime,l,i),nt.log("Seek was "+l+"ms")}else t===ct.UNLOAD&&a===e.States.PLAYING?e.stateMachineCallbacks.playingAndBye(r,o,n):a===e.States.PAUSE&&i!==e.States.PAUSED_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(t);t===ct.VIDEO_CHANGE?e.stateMachineCallbacks.videoChange(n):t===ct.AUDIO_CHANGE?e.stateMachineCallbacks.audioChange(n):t===ct.MUTE?(nt.log("Setting sample to muted"),e.stateMachineCallbacks.mute()):t===ct.UN_MUTE&&(nt.log("Setting sample to unmuted"),e.stateMachineCallbacks.unMute())}},onseek:function(t,a,i,s){e.seekTimestamp=s},onseeked:function(t,a,i,s){e.seekedTimestamp=s},ontimechanged:function(t,a,i,s,n){var r=s-e.onEnterStateTimestamp;r>{HEARTBEAT_THRESHOLD:E}&&(e.stateMachineCallbacks.setVideoTimeEndFromEvent(n),nt.log("Sending heartbeat"),e.stateMachineCallbacks.heartbeat(r,a.toLowerCase(),n),e.onEnterStateTimestamp=s,e.stateMachineCallbacks.setVideoTimeStartFromEvent(n))},onplayerError:function(t,a,i,s,n){e.stateMachineCallbacks.error(n)}}})}},{key:"callEvent",value:function(t,e,a){var i=this.stateMachine[t];i?i.call(this.stateMachine,a,e):nt.log("Ignored Event: "+t)}}],i=[{key:"pad",value:function(t,e){return(t+new Array(e).join(" ")).slice(0,e)}}],a&&me(e.prototype,a),i&&me(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ae(t){return function(t){if(Array.isArray(t))return ye(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ye(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ye(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function _e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ne(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ve(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}fe(pe,"PAUSE_SEEK_DELAY",200),fe(pe,"SEEKED_PAUSE_DELAY",300);var ge=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_e(this,t),this.stateMachineCallbacks=e,this.pausedTimestamp=null,this.seekTimestamp=0,this.seekedTimestamp=0,this.seekedTimeout=0,this.onEnterStateTimestamp=0,this.lastPlayHeadDuration=0,this.autoPlay=!1,this.States={SETUP:"SETUP",STARTUP:"STARTUP",READY:"READY",PLAYING:"PLAYING",REBUFFERING:"REBUFFERING",PAUSE:"PAUSE",QUALITYCHANGE:"QUALITYCHANGE",PAUSED_SEEKING:"PAUSED_SEEKING",PLAY_SEEKING:"PLAY_SEEKING",END_PLAY_SEEKING:"END_PLAY_SEEKING",QUALITYCHANGE_PAUSE:"QUALITYCHANGE_PAUSE",QUALITYCHANGE_REBUFFERING:"QUALITYCHANGE_REBUFFERING",END:"END",ERROR:"ERROR",MUTING_READY:"MUTING_READY",MUTING_PLAY:"MUTING_PLAY",MUTING_PAUSE:"MUTING_PAUSE",CASTING:"CASTING"},this.createStateMachine(a)}var e,a,i;return e=t,a=[{key:"getAllStates",value:function(){var t=this;return[].concat(Ae(Object.keys(this.States).map((function(e){return t.States[e]}))),["FINISH_PLAY_SEEKING","PLAY_SEEK","FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE","FINISH_QUALITYCHANGE_REBUFFERING"])}},{key:"createStateMachine",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.stateMachine=le().create({initial:this.States.SETUP,error:function(t,e,a,i,s,n){nt.error("Error in statemachine: "+n)},events:[{name:ct.TIMECHANGED,from:this.States.SETUP,to:this.States.SETUP},{name:ct.READY,from:[this.States.SETUP,this.States.ERROR],to:this.States.READY},{name:ct.PLAY,from:this.States.READY,to:this.States.STARTUP},{name:ct.PLAY,from:this.States.SETUP,to:this.States.SETUP},{name:ct.TIMECHANGED,from:this.States.READY,to:this.States.STARTUP},{name:ct.START_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.END_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.VIDEO_CHANGE,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.AUDIO_CHANGE,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.TIMECHANGED,from:this.States.STARTUP,to:this.States.PLAYING},{name:ct.TIMECHANGED,from:this.States.PLAYING,to:this.States.PLAYING},{name:ct.END_BUFFERING,from:this.States.PLAYING,to:this.States.PLAYING},{name:ct.START_BUFFERING,from:this.States.PLAYING,to:this.States.REBUFFERING},{name:ct.START_BUFFERING,from:this.States.REBUFFERING,to:this.States.REBUFFERING},{name:ct.TIMECHANGED,from:this.States.REBUFFERING,to:this.States.PLAYING},{name:ct.SEEK,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.SEEK,from:this.States.PLAYING,to:this.States.PLAY_SEEKING},{name:ct.TIMECHANGED,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.TIMECHANGED,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.PAUSE,from:this.States.PLAYING,to:this.States.PAUSE},{name:ct.PAUSE,from:this.States.REBUFFERING,to:this.States.PAUSE},{name:ct.TIMECHANGED,from:this.States.PAUSE,to:this.States.PAUSE},{name:ct.PLAY,from:this.States.PAUSE,to:this.States.PLAYING},{name:ct.VIDEO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:ct.AUDIO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:ct.VIDEO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:ct.AUDIO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:this.States.QUALITYCHANGE,to:this.States.PLAYING},{name:ct.VIDEO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ct.AUDIO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ct.VIDEO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ct.AUDIO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:this.States.QUALITYCHANGE_PAUSE,to:this.States.PAUSE},{name:ct.SEEK,from:this.States.PAUSE,to:this.States.PAUSED_SEEKING},{name:ct.SEEK,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.AUDIO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.VIDEO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.START_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.END_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.SEEKED,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:ct.PLAY,from:this.States.PAUSED_SEEKING,to:this.States.PLAYING},{name:ct.PAUSE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:"PLAY_SEEK",from:this.States.PAUSE,to:this.States.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.States.PAUSED_SEEKING,to:this.States.PLAY_SEEKING},{name:"PLAY_SEEK",from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.SEEK,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.AUDIO_CHANGE,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.VIDEO_CHANGE,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.START_BUFFERING,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.END_BUFFERING,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.SEEKED,from:this.States.PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:ct.SEEKED,from:this.States.PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ct.START_BUFFERING,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ct.END_BUFFERING,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ct.SEEKED,from:this.States.END_PLAY_SEEKING,to:this.States.END_PLAY_SEEKING},{name:ct.TIMECHANGED,from:this.States.END_PLAY_SEEKING,to:this.States.PLAYING},{name:ct.END,from:this.States.PLAY_SEEKING,to:this.States.END},{name:ct.END,from:this.States.PAUSED_SEEKING,to:this.States.END},{name:ct.END,from:this.States.PLAYING,to:this.States.END},{name:ct.END,from:this.States.PAUSE,to:this.States.END},{name:ct.SEEK,from:this.States.END,to:this.States.END},{name:ct.SEEKED,from:this.States.END,to:this.States.END},{name:ct.TIMECHANGED,from:this.States.END,to:this.States.END},{name:ct.END_BUFFERING,from:this.States.END,to:this.States.END},{name:ct.START_BUFFERING,from:this.States.END,to:this.States.END},{name:ct.END,from:this.States.END,to:this.States.END},{name:ct.SEEKED,from:this.States.PLAYING,to:this.States.PLAYING},{name:ct.PLAY,from:this.States.END,to:this.States.PLAYING},{name:ct.ERROR,from:this.getAllStates(),to:this.States.ERROR},{name:ct.PAUSE,from:this.States.ERROR,to:this.States.ERROR},{name:ct.SEEK,from:this.States.END_PLAY_SEEKING,to:this.States.PLAY_SEEKING},{name:"FINISH_PLAY_SEEKING",from:this.States.END_PLAY_SEEKING,to:this.States.PLAYING},{name:ct.UNLOAD,from:this.getAllStates(),to:this.States.END},{name:ct.START_AD,from:this.States.PLAYING,to:this.States.AD},{name:ct.END_AD,from:this.States.AD,to:this.States.PLAYING},{name:ct.MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:ct.UN_MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:"FINISH_MUTING",from:this.States.MUTING_READY,to:this.States.READY},{name:ct.MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:ct.UN_MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:"FINISH_MUTING",from:this.States.MUTING_PLAY,to:this.States.PLAYING},{name:ct.MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:ct.UN_MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:"FINISH_MUTING",from:this.States.MUTING_PAUSE,to:this.States.PAUSE},{name:ct.START_CAST,from:[this.States.READY,this.States.PAUSE],to:this.States.CASTING},{name:ct.PAUSE,from:this.States.CASTING,to:this.States.CASTING},{name:ct.PLAY,from:this.States.CASTING,to:this.States.CASTING},{name:ct.TIMECHANGED,from:this.States.CASTING,to:this.States.CASTING},{name:ct.MUTE,from:this.States.CASTING,to:this.States.CASTING},{name:ct.SEEK,from:this.States.CASTING,to:this.States.CASTING},{name:ct.SEEKED,from:this.States.CASTING,to:this.States.CASTING},{name:ct.END_CAST,from:this.States.CASTING,to:this.States.READY},{name:ct.SEEK,from:this.States.READY,to:this.States.READY},{name:ct.SEEKED,from:this.States.READY,to:this.States.READY},{name:ct.SEEKED,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.SOURCE_LOADED,from:this.getAllStates(),to:this.States.SETUP},{name:ct.SOURCE_LOADED,from:this.States.SETUP,to:this.States.SETUP},{name:ct.SOURCE_LOADED,from:this.States.READY,to:this.States.READY},{name:ct.VIDEO_CHANGE,from:this.States.REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:ct.AUDIO_CHANGE,from:this.States.REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:ct.VIDEO_CHANGE,from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:ct.AUDIO_CHANGE,from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.REBUFFERING}],callbacks:{onpause:function(t,a,i,s){a===e.States.PLAYING&&(e.pausedTimestamp=s)},onbeforeevent:function(a,i,s,n,r){return a===ct.PLAY&&i===e.States.SETUP&&s===e.States.SETUP&&(e.autoPlay=!0),a===ct.SEEK&&(i===e.States.PAUSE||i===e.States.PLAYING)&&(e.seekedFrom=e.lastPlayHeadDuration,e.seekTimestamp=n,n-e.pausedTimestamp<t.PAUSE_SEEK_DELAY)?(e.stateMachine.PLAY_SEEK(n),!1):(a===ct.SEEK&&clearTimeout(e.seekedTimeout),a!==ct.SOURCE_LOADED?a===ct.SEEKED&&i===e.States.PAUSED_SEEKING?(e.seekedTimestamp=n,e.seekedTimeout=setTimeout((function(){e.stateMachine.pause(n,r)}),t.SEEKED_PAUSE_DELAY),!1):(i!==e.States.REBUFFERING||s!==e.States.QUALITYCHANGE_REBUFFERING)&&void(r&&(e.lastPlayHeadDuration=1e3*r.currentTime)):void e.stateMachineCallbacks.loaded(n,e.States.READY,r))},onenterstate:function(t,i,s,n,r){s===e.States.SETUP?e.stateMachineCallbacks.setup(n,e.States.SETUP,r):s===e.States.READY?(r.playerSoftware=Lt.VIDEOJS,e.stateMachineCallbacks.ready(n,e.States.READY,r)):"play"===t&&s===e.States.STARTUP?e.stateMachineCallbacks.first_play(n,e.States.PLAY,r):"timechanged"===t&&i===e.States.STARTUP&&s===e.States.PLAYING&&e.autoPlay?(e.stateMachineCallbacks.first_play(n,e.States.PLAY,r),e.stateMachineCallbacks.playing(n,e.States.PLAYING,r),e.stateMachineCallbacks.playback_started(r)):"play"===t&&i===e.States.PAUSE?(e.stateMachineCallbacks.play(n,e.States.PLAY,r),e.stateMachineCallbacks.playing(n,e.States.PLAYING,r)):"timechanged"!==t||i!==e.States.STARTUP||s!==e.States.PLAYING||e.autoPlay?s===e.States.PAUSE&&i===e.States.PLAYING?e.stateMachineCallbacks.pause(n,e.States.PAUSE,r):s===e.States.END?e.stateMachineCallbacks.end(n,e.States.END,r):s===e.States.END?e.stateMachineCallbacks.mute(n,r):t===ct.START_BUFFERING?e.stateMachineCallbacks.start_rebuffer(n,e.States.REBUFFERING,r):"timechanged"===t&&i===e.States.REBUFFERING&&s===e.States.PLAYING&&e.stateMachineCallbacks.end_rebuffer(n,e.States.REBUFFERING,r):(e.stateMachineCallbacks.playing(n,e.States.PLAYING,r),e.stateMachineCallbacks.playback_started(r)),"none"===i&&a.starttime?e.onEnterStateTimestamp=a.starttime:e.onEnterStateTimestamp=n||(new Date).getTime(),r&&s!==e.States.PAUSED_SEEKING&&s!==e.States.PLAY_SEEKING&&s!==e.States.END_PLAY_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(r),"PLAY_SEEK"===t&&s===e.States.PLAY_SEEKING&&s!==e.States.PLAY_SEEKING&&s!==e.States.END_PLAY_SEEKING&&(e.seekTimestamp=e.onEnterStateTimestamp)},onafterevent:function(t,a,i,s){i===e.States.QUALITYCHANGE&&e.stateMachine.FINISH_QUALITYCHANGE(s),i!==e.States.MUTING_READY&&i!==e.States.MUTING_PLAY&&i!==e.States.MUTING_PAUSE||e.stateMachine.FINISH_MUTING(s)},onleavestate:function(t,a,i,s,n){if(e.stateMachineCallbacks.resetSessionExpiry(),s){var r=s-e.onEnterStateTimestamp;if(n&&i!==e.States.PAUSED_SEEKING&&i!==e.States.PLAY_SEEKING&&i!==e.States.END_PLAY_SEEKING&&(nt.log("Setting video time end to "+n.currentTime+", going to "+i),e.stateMachineCallbacks.setVideoTimeEndFromEvent(n)),"PLAY_SEEK"===t&&a===e.States.PAUSE)return!0;var o=a.toLowerCase();if(a===e.States.END_PLAY_SEEKING||a===e.States.PAUSED_SEEKING){var l=e.seekedTimestamp-e.seekTimestamp;e.stateMachineCallbacks.playback_seeked(e.seekedFrom,1e3*n.currentTime,l,i),nt.log("Seek was "+l+"ms")}else t===ct.UNLOAD&&a===e.States.PLAYING?e.stateMachineCallbacks.playingAndBye(r,o,n):a===e.States.PAUSE&&i!==e.States.PAUSED_SEEKING&&e.stateMachineCallbacks.setVideoTimeStartFromEvent(t);t===ct.VIDEO_CHANGE?e.stateMachineCallbacks.videoChange(n):t===ct.AUDIO_CHANGE?e.stateMachineCallbacks.audioChange(n):t===ct.MUTE?(nt.log("Setting sample to muted"),e.stateMachineCallbacks.mute()):t===ct.UN_MUTE&&(nt.log("Setting sample to unmuted"),e.stateMachineCallbacks.unMute())}},onseek:function(t,a,i,s){e.seekTimestamp=s},onseeked:function(t,a,i,s){e.seekedTimestamp=s},ontimechanged:function(t,a,i,s,n){var r=s-e.onEnterStateTimestamp;r>E&&(e.stateMachineCallbacks.setVideoTimeEndFromEvent(n),nt.log("Sending heartbeat"),e.stateMachineCallbacks.heartbeat(r,a.toLowerCase(),n),e.onEnterStateTimestamp=s,e.stateMachineCallbacks.setVideoTimeStartFromEvent(n),e.stateMachineCallbacks.resetSessionExpiry())},onplayerError:function(t,a,i,s,n){e.stateMachineCallbacks.error(n)}}})}},{key:"callEvent",value:function(t,e,a){var i=this.stateMachine[t];i?i.call(this.stateMachine,a,e):nt.log("Ignored Event: "+t)}},{key:"updateMetadata",value:function(t){this.stateMachineCallbacks.updateSample(t)}}],i=[{key:"pad",value:function(t,e){return(t+new Array(e).join(" ")).slice(0,e)}}],a&&Ne(e.prototype,a),i&&Ne(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ie(t){return function(t){if(Array.isArray(t))return De(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return De(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return De(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function Te(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pe(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}ve(ge,"PAUSE_SEEK_DELAY",200),ve(ge,"SEEKED_PAUSE_DELAY",300);var Ce=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Te(this,t),this.stateMachineCallbacks=e,this.pausedTimestamp=null,this.onEnterStateTimestamp=0,this.seekStartedAt=null,this.seekTimestamp=0,this.seekedTimestamp=0,this.seekedFrom=0,this.lastPlayHeadDuration=0,this.playTimeStamp=null,this.States={SETUP:"SETUP",STARTUP:"STARTUP",READY:"READY",PLAYING:"PLAYING",REBUFFERING:"REBUFFERING",PAUSE:"PAUSE",QUALITYCHANGE:"QUALITYCHANGE",PAUSED_SEEKING:"PAUSED_SEEKING",QUALITYCHANGE_PAUSE:"QUALITYCHANGE_PAUSE",QUALITYCHANGE_REBUFFERING:"QUALITYCHANGE_REBUFFERING",END:"END",ERROR:"ERROR",MUTING_READY:"MUTING_READY",MUTING_PLAY:"MUTING_PLAY",MUTING_PAUSE:"MUTING_PAUSE",CASTING:"CASTING"},this.createStateMachine(a)}var e,a,i;return e=t,a=[{key:"getAllStates",value:function(){var t=this;return[].concat(Ie(Object.keys(this.States).map((function(e){return t.States[e]}))),["FINISH_QUALITYCHANGE_PAUSE","FINISH_QUALITYCHANGE","FINISH_QUALITYCHANGE_REBUFFERING"])}},{key:"createStateMachine",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.stateMachine=le().create({initial:this.States.SETUP,error:function(t,e,a,i,s,n){nt.error("Error in statemachine: "+n)},events:[{name:ct.TIMECHANGED,from:this.States.SETUP,to:this.States.SETUP},{name:ct.READY,from:[this.States.SETUP,this.States.ERROR],to:this.States.READY},{name:ct.PLAY,from:this.States.READY,to:this.States.STARTUP},{name:ct.START_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.END_BUFFERING,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.VIDEO_CHANGE,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.AUDIO_CHANGE,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.TIMECHANGED,from:this.States.STARTUP,to:this.States.PLAYING},{name:ct.TIMECHANGED,from:this.States.PLAYING,to:this.States.PLAYING},{name:ct.TIMECHANGED,from:this.States.PAUSE,to:this.States.PAUSE},{name:ct.SEEKED,from:this.States.PAUSE,to:this.States.PAUSE},{name:ct.END_BUFFERING,from:this.States.PLAYING,to:this.States.PLAYING},{name:ct.START_BUFFERING,from:this.States.PLAYING,to:this.States.REBUFFERING},{name:ct.START_BUFFERING,from:this.States.REBUFFERING,to:this.States.REBUFFERING},{name:ct.PLAY,from:this.States.REBUFFERING,to:this.States.PLAYING},{name:ct.TIMECHANGED,from:this.States.REBUFFERING,to:this.States.PLAYING},{name:ct.SEEK,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.PLAY,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.PAUSE,from:this.States.PLAYING,to:this.States.PAUSE},{name:ct.PAUSE,from:this.States.REBUFFERING,to:this.States.PAUSE},{name:ct.PLAY,from:this.States.PAUSE,to:this.States.PLAYING},{name:ct.TIMECHANGED,from:this.States.PAUSE,to:this.States.PLAYING},{name:ct.VIDEO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:ct.AUDIO_CHANGE,from:this.States.PLAYING,to:this.States.QUALITYCHANGE},{name:ct.VIDEO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:ct.AUDIO_CHANGE,from:this.States.QUALITYCHANGE,to:this.States.QUALITYCHANGE},{name:"FINISH_QUALITYCHANGE",from:this.States.QUALITYCHANGE,to:this.States.PLAYING},{name:ct.VIDEO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ct.AUDIO_CHANGE,from:this.States.PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ct.VIDEO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:ct.AUDIO_CHANGE,from:this.States.QUALITYCHANGE_PAUSE,to:this.States.QUALITYCHANGE_PAUSE},{name:"FINISH_QUALITYCHANGE_PAUSE",from:this.States.QUALITYCHANGE_PAUSE,to:this.States.PAUSE},{name:ct.SEEK,from:this.States.PAUSE,to:this.States.PAUSED_SEEKING},{name:ct.SEEK,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.AUDIO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.VIDEO_CHANGE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.START_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.END_BUFFERING,from:this.States.PAUSED_SEEKING,to:this.States.PAUSED_SEEKING},{name:ct.SEEKED,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:ct.TIMECHANGED,from:this.States.PAUSED_SEEKING,to:this.States.PLAYING},{name:ct.PAUSE,from:this.States.PAUSED_SEEKING,to:this.States.PAUSE},{name:ct.END,from:this.States.PAUSED_SEEKING,to:this.States.END},{name:ct.END,from:this.States.PLAYING,to:this.States.END},{name:ct.END,from:this.States.PAUSE,to:this.States.END},{name:ct.SEEK,from:this.States.END,to:this.States.END},{name:ct.SEEKED,from:this.States.END,to:this.States.END},{name:ct.TIMECHANGED,from:this.States.END,to:this.States.END},{name:ct.END_BUFFERING,from:this.States.END,to:this.States.END},{name:ct.START_BUFFERING,from:this.States.END,to:this.States.END},{name:ct.END,from:this.States.END,to:this.States.END},{name:ct.SEEKED,from:this.States.PLAYING,to:this.States.PLAYING},{name:ct.PLAY,from:this.States.END,to:this.States.PLAYING},{name:ct.ERROR,from:this.getAllStates(),to:this.States.ERROR},{name:ct.PAUSE,from:this.States.ERROR,to:this.States.ERROR},{name:ct.UNLOAD,from:this.getAllStates(),to:this.States.END},{name:ct.START_AD,from:this.States.PLAYING,to:this.States.AD},{name:ct.END_AD,from:this.States.AD,to:this.States.PLAYING},{name:ct.MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:ct.UN_MUTE,from:this.States.READY,to:this.States.MUTING_READY},{name:"FINISH_MUTING",from:this.States.MUTING_READY,to:this.States.READY},{name:ct.MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:ct.UN_MUTE,from:this.States.PLAYING,to:this.States.MUTING_PLAY},{name:"FINISH_MUTING",from:this.States.MUTING_PLAY,to:this.States.PLAYING},{name:ct.MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:ct.UN_MUTE,from:this.States.PAUSE,to:this.States.MUTING_PAUSE},{name:"FINISH_MUTING",from:this.States.MUTING_PAUSE,to:this.States.PAUSE},{name:ct.START_CAST,from:[this.States.READY,this.States.PAUSE],to:this.States.CASTING},{name:ct.PAUSE,from:this.States.CASTING,to:this.States.CASTING},{name:ct.PLAY,from:this.States.CASTING,to:this.States.CASTING},{name:ct.TIMECHANGED,from:this.States.CASTING,to:this.States.CASTING},{name:ct.MUTE,from:this.States.CASTING,to:this.States.CASTING},{name:ct.SEEK,from:this.States.CASTING,to:this.States.CASTING},{name:ct.SEEKED,from:this.States.CASTING,to:this.States.CASTING},{name:ct.END_CAST,from:this.States.CASTING,to:this.States.READY},{name:ct.SEEK,from:this.States.READY,to:this.States.READY},{name:ct.SEEKED,from:this.States.READY,to:this.States.READY},{name:ct.SEEKED,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.SOURCE_LOADED,from:this.States.SETUP,to:this.States.SETUP},{name:ct.SOURCE_LOADED,from:this.States.READY,to:this.States.READY},{name:ct.SOURCE_LOADED,from:this.States.STARTUP,to:this.States.STARTUP},{name:ct.SOURCE_LOADED,from:this.States.PLAYING,to:this.States.PLAYING},{name:ct.VIDEO_CHANGE,from:this.States.REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:ct.AUDIO_CHANGE,from:this.States.REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:ct.VIDEO_CHANGE,from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:ct.AUDIO_CHANGE,from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.QUALITYCHANGE_REBUFFERING},{name:"FINISH_QUALITYCHANGE_REBUFFERING",from:this.States.QUALITYCHANGE_REBUFFERING,to:this.States.REBUFFERING}],callbacks:{onbeforeevent:function(e,a,i,s,n){if(e===ct.SEEK&&a===t.States.PAUSE&&(t.seekedFrom=t.lastPlayHeadDuration),e!==ct.SOURCE_LOADED)n&&(t.lastPlayHeadDuration=1e3*n.currentTime);else{var r=null;a===t.States.PLAYING&&(r=(new Date).getTime()-t.playTimeStamp.getTime()),t.stateMachineCallbacks.loaded(s,t.States.READY,n,r)}},onenterstate:function(a,i,s,n,r){s===t.States.SETUP&&"none"===i?t.stateMachineCallbacks.setup(n,t.States.SETUP,r):s===t.States.READY&&i===t.States.SETUP?t.stateMachineCallbacks.ready(n,t.States.READY,r):"play"===a&&s===t.States.STARTUP?(t.playTimeStamp=new Date,t.stateMachineCallbacks.first_play(n,t.States.PLAY,r)):"play"===a&&i===t.States.PAUSE?(t.stateMachineCallbacks.play(n,t.States.PLAY,r),t.stateMachineCallbacks.playing(n,t.States.PLAYING,r)):"timechanged"===a&&i===t.States.STARTUP&&s===t.States.PLAYING?(t.stateMachineCallbacks.playing(n,t.States.PLAYING,r),t.stateMachineCallbacks.playback_started(r)):"timechanged"===a&&i===t.States.PAUSE&&s===t.States.PLAYING?t.stateMachineCallbacks.playing(n,t.States.PLAYING,r):s===t.States.PAUSE&&i===t.States.PLAYING?t.stateMachineCallbacks.pause(n,t.States.PAUSE,r):s===t.States.END?t.stateMachineCallbacks.end(n,t.States.END,r):a===ct.START_BUFFERING?t.stateMachineCallbacks.start_rebuffer(n,t.States.REBUFFERING,r):"timechanged"===a&&i===t.States.REBUFFERING&&s===t.States.PLAYING&&t.stateMachineCallbacks.end_rebuffer(n,t.States.REBUFFERING,r),"none"===i&&e.starttime?t.onEnterStateTimestamp=e.starttime:t.onEnterStateTimestamp=n||(new Date).getTime(),r&&s!==t.States.PAUSED_SEEKING&&t.stateMachineCallbacks.setVideoTimeStartFromEvent(r)},onafterevent:function(e,a,i,s){i===t.States.QUALITYCHANGE&&t.stateMachine.FINISH_QUALITYCHANGE(s),i!==t.States.MUTING_READY&&i!==t.States.MUTING_PLAY&&i!==t.States.MUTING_PAUSE||t.stateMachine.FINISH_MUTING(s)},onleavestate:function(e,a,i,s,n){if(t.stateMachineCallbacks.resetSessionExpiry(),s){var r=s-t.onEnterStateTimestamp;n&&i!==t.States.PAUSED_SEEKING&&(nt.log("Setting video time end to "+n.currentTime+", going to "+i),t.stateMachineCallbacks.setVideoTimeEndFromEvent(n));var o=a.toLowerCase();if(a===t.States.PAUSED_SEEKING){var l=s-t.seekStartedAt;t.seekStartedAt=null,t.stateMachineCallbacks.playback_seeked(t.seekedFrom,1e3*n.currentTime,l,i),nt.log("Seek was "+l+"ms")}else e===ct.UNLOAD&&a===t.States.PLAYING?t.stateMachineCallbacks.playingAndBye(r,o,n):a===t.States.PAUSE&&i!==t.States.PAUSED_SEEKING&&i!==t.States.PLAYING&&(t.stateMachineCallbacks.setVideoTimeStartFromEvent(e),t.stateMachineCallbacks.pause(r,o,n));e===ct.VIDEO_CHANGE?t.stateMachineCallbacks.videoChange(n):e===ct.AUDIO_CHANGE?t.stateMachineCallbacks.audioChange(n):e===ct.MUTE?(nt.log("Setting sample to muted"),t.stateMachineCallbacks.mute(s,n)):e===ct.UN_MUTE&&(nt.log("Setting sample to unmuted"),t.stateMachineCallbacks.unMute(s,n))}},onseek:function(e,a,i,s){t.seekStartedAt=t.seekStartedAt||s},onseeked:function(e,a,i,s){t.seekedTimestamp=s},ontimechanged:function(e,a,i,s,n){var r=s-t.onEnterStateTimestamp;r>E&&(t.stateMachineCallbacks.setVideoTimeEndFromEvent(n),nt.log("Sending heartbeat"),t.stateMachineCallbacks.heartbeat(r,a.toLowerCase(),n),t.onEnterStateTimestamp=s,t.stateMachineCallbacks.setVideoTimeStartFromEvent(n),t.stateMachineCallbacks.resetSessionExpiry())},onplayerError:function(e,a,i,s,n){t.stateMachineCallbacks.error(n)}}})}},{key:"callEvent",value:function(t,e,a){var i=this.stateMachine[t];i?i.call(this.stateMachine,a,e):nt.log("Ignored Event: "+t)}},{key:"updateMetadata",value:function(t){this.stateMachineCallbacks.updateSample(t)}}],i=[{key:"pad",value:function(t,e){return(t+new Array(e).join(" ")).slice(0,e)}}],a&&Pe(e.prototype,a),i&&Pe(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ue(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const be=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,a,i;return e=t,i=[{key:"getAnalyticsStateMachine",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ut.isBitmovinVersionPre7(t)?new Ee(e,a):ut.isBitmovinVersion7Plus(t)?new pe(e,a):ut.isVideoJs(t)?new ge(e,a):(ut.isHlsjs(t)||ut.isDashjs(t)||ut.isShaka(t),new Ce(e,a))}}],(a=null)&&Ue(e.prototype,a),i&&Ue(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ge(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const Re=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,a,i;return e=t,(a=[{key:"setUp",value:function(){nt.log("setting up cast session"),this.castSession=cast.framework.CastContext.getInstance().getCurrentSession(),this.addMessageListener()}},{key:"addMessageListener",value:function(){var t=this,e=this.castSession.getApplicationMetadata();!e||e.namespaces.indexOf(u)<0?nt.log("No analytics on chrome cast receiver enabled!"):(nt.log("adding message listener"),this.castSession.addMessageListener(u,(function(e,a){nt.log("Received: "+e+" "+a);try{var i=JSON.parse(a);t.handleReceiverMessage(i)}catch(t){nt.error("Message parsing failed "+a)}})))}},{key:"handleReceiverMessage",value:function(t){nt.log(t)}},{key:"sendMessage",value:function(t){var e=this.castSession.getApplicationMetadata();!e||e.namespaces.indexOf(u)<0?nt.log("No analytics on chrome cast receiver enabled!"):(nt.log("Sending message: "+JSON.stringify(t)),this.castSession.sendMessage(u,t))}}])&&Ge(e.prototype,a),i&&Ge(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Le(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}const Ye=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,a,i;return e=t,(a=[{key:"setUp",value:function(){var t=this,e=cast.receiver.CastReceiverManager.getInstance();this.messageBus=e.getCastMessageBus(u,cast.receiver.CastMessageBus.MessageType.JSON),nt.log(this.messageBus),this.messageBus.onMessage=function(e){nt.log("Received message from cast client: "+JSON.stringify(e));var a=e.data;t.handleClientMessage(a)}}},{key:"setCallback",value:function(t){this.callback=t}},{key:"handleClientMessage",value:function(t){this.callback(t)}},{key:"sendMessage",value:function(t){this.messageBus.broadcast(t)}}])&&Le(e.prototype,a),i&&Le(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();const Oe={SETUP:"event_setup",PLAYER_READY:"event_player_ready",PLAYBACK_READY:"event_playback_ready",PLAYBACK_STARTED:"event_playback_started",PAUSE:"event_pause",PLAY:"event_play",PLAYING:"event_playing",PLAYBACK_UPDATE:"event_playback_update",END:"event_ended",MUTE:"event_muted",UNMUTE:"event_unmute",SEEKED:"event_seeked",START_REBUFFER:"event_rebuffer_start",END_REBUFFER:"event_rebuffer_end",ERROR:"event_error"};var Fe=a(795),ke=a.n(Fe);function we(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Me(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var He=function(){function t(e){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Me(this,"register",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return a.analyticsStateMachine=new Ce(a.stateMachineCallbacks,e),a.analyticsStateMachine;e.starttime||(e.starttime=r.getCurrentTimestamp()),a.analyticsStateMachine=be.getAnalyticsStateMachine(t,a.stateMachineCallbacks,e),a.adapter=re.getAdapter(t,a.record,a.analyticsStateMachine,e.mediaElement),a.adapter||nt.error("Could not detect player.")})),Me(this,"registerVideoJSPlayer",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.starttime||(e.starttime=r.getCurrentTimestamp()),a.analyticsStateMachine=new ge(a.stateMachineCallbacks,e),a.adapter=new _t(t,a.record,a.analyticsStateMachine)})),Me(this,"registerHLSJSPlayer",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.starttime||(e.starttime=r.getCurrentTimestamp()),a.analyticsStateMachine=new Ce(a.stateMachineCallbacks,e),a.adapter=new Bt(t,a.record,a.analyticsStateMachine)})),Me(this,"registerShakaPlayer",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.starttime||(e.starttime=r.getCurrentTimestamp()),a.analyticsStateMachine=new Ce(a.stateMachineCallbacks,e),a.adapter=new $t(t,a.record,a.analyticsStateMachine,e.mediaElement)})),Me(this,"registerHTML5Player",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.starttime||(e.starttime=r.getCurrentTimestamp()),a.analyticsStateMachine=new Ce(a.stateMachineCallbacks,e),a.adapter=new Ft(t,a.record,a.analyticsStateMachine)})),Me(this,"registerDashJSPlayer",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.starttime||(e.starttime=r.getCurrentTimestamp()),a.analyticsStateMachine=new Ce(a.stateMachineCallbacks,e),a.adapter=new se(t,a.record,a.analyticsStateMachine)})),Me(this,"registerReactNativeVideoPlayer",(function(t){return t.starttime||(t.starttime=r.getCurrentTimestamp()),a.analyticsStateMachine=new Ce(a.stateMachineCallbacks,t),a.analyticsStateMachine})),Me(this,"getCurrentImpressionId",(function(){return a.sample.impressionId})),Me(this,"record",(function(t,e){e=e||{},a.analyticsStateMachine.callEvent(t,e,r.getCurrentTimestamp())})),Me(this,"setDroppedFrames",(function(t){})),this.config=e,this.analyticsCall=new R,this.sessionCreationCall=new B,this.playerInitCall=new tt,this.castClient=new Re,this.castReceiver=new Ye,this.droppedSampleFrames=0,this.licensing="granted",this.startupTime=0,this.pageLoadType=t.PAGE_LOAD_TYPE.FOREGROUND,this.autoplay=void 0,this.isCastClient=!1,this.isCastReceiver=!1,this.isAllowedToSendSamples=!1,this.samplesQueue=[],this.previousState=void 0,this.previousStateTimeStamp=new Date,this.firstPlayTimestamp=0,this.isMuted=!1,this.isFullScreen=void 0,this.videoWidthPixels=void 0,this.videoHeightPixels=void 0,this.upscalePercentage=void 0,this.downscalePercentage=void 0,this.videoBitrate=void 0,this.audioCodec=void 0,this.videoCodec=void 0,this.currentTime=0;try{this.orientation=screen.orientation.type.match(/\w+/)[0],screen.orientation.onchange=function(){this.orientation=screen.orientation.type.match(/\w+/)[0]}}catch(t){this.orientation="undetected"}this.setConfigParameters(),this.init(),this.setupSample(),this.setupStateMachineCallbacks()}var e,a,i;return e=t,a=[{key:"init",value:function(){if(this.isCastReceiver||""!=this.config.property_id&&r.validString(this.config.property_id)){nt.setLogging(this.config.debug||!1),this.propertyId=this.config.property_id,"undefined"!=typeof window&&void 0!==window.parent?this.pageURL=window.location!=window.parent.location?document.referrer:document.location.href:this.config.page_url?this.pageURL=this.config.page_url:this.pageURL=null;var t=!1;this.config.test&&(t=!0);var e=null;this.config.sessionID&&(e=this.config.sessionID);var a=!0;this.config.hasOwnProperty("sendSessionRequest")&&(a=this.config.sendSessionRequest);var i=null;this.config.userID&&(i=this.config.userID),this.setUserId(t,i),this.setSessionId(t,e,a),this.setPlayerInstanceId(),this.setPlaybackId()}else console.error("Invalid analytics property_id provided")}},{key:"setConfigParameters",value:function(){arguments.length>0&&void 0!==arguments[0]||this.sample;var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.config;this.customData1=r.getCustomDataString(t.customData1),this.customData2=r.getCustomDataString(t.customData2),this.customData3=r.getCustomDataString(t.customData3),this.customData4=r.getCustomDataString(t.customData4),this.customData5=r.getCustomDataString(t.customData5),this.customData6=r.getCustomDataString(t.customData6),this.customData7=r.getCustomDataString(t.customData7),this.customData8=r.getCustomDataString(t.customData8),this.customData9=r.getCustomDataString(t.customData9),this.customData10=r.getCustomDataString(t.customData10),this.customPlayerIntegrationVersion=r.getCustomDataString(t.customPlayerIntegrationVersion),this.customPlayerName=r.getCustomDataString(t.customPlayerName),this.customPageType=r.getCustomDataString(t.customPageType),this.customUserId=r.getCustomDataString(t.userId),this.userName=r.getCustomDataString(t.userName),this.userEMail=r.getCustomDataString(t.userEMail),this.userPhone=r.getCustomDataString(t.userPhone),this.userProfileImage=r.getCustomDataString(t.userProfileImage),this.userAddressLine1=r.getCustomDataString(t.userAddressLine1),this.userAddressLine2=r.getCustomDataString(t.userAddressLine2),this.userCity=r.getCustomDataString(t.userCity),this.userState=r.getCustomDataString(t.userState),this.userCountry=r.getCustomDataString(t.userCountry),this.userZipcode=r.getCustomDataString(t.userZipcode),this.customContentType=r.getCustomDataString(t.customContentType),this.customVideoDurationMillis=r.getCustomDataString(t.customVideoDurationMillis),this.customEncodingVariant=r.getCustomDataString(t.customEncodingVariant),this.customVideoLanguage=r.getCustomDataString(t.customVideoLanguage),this.customVideoId=r.getCustomDataString(t.customVideoId),this.customVideoSeries=r.getCustomDataString(t.customVideoSeries),this.customVideoProducer=r.getCustomDataString(t.customVideoProducer),this.customVideoTitle=r.getCustomDataString(t.customVideoTitle),this.customVideoVariantName=r.getCustomDataString(t.customVideoVariantName),this.customVideoVariant=r.getCustomDataString(t.customVideoVariant),this.SDKVersion="1.0.0",this.experimentName=t.experimentName}},{key:"updateCustomUserData",value:function(t){this.customUserId=r.getCustomDataString(t.userId),this.userName=r.getCustomDataString(t.userName),this.userEMail=r.getCustomDataString(t.userEMail),this.userPhone=r.getCustomDataString(t.userPhone),this.userProfileImage=r.getCustomDataString(t.userProfileImage),this.userAddressLine1=r.getCustomDataString(t.userAddressLine1),this.userAddressLine2=r.getCustomDataString(t.userAddressLine2),this.userCity=r.getCustomDataString(t.userCity),this.userState=r.getCustomDataString(t.userState),this.userCountry=r.getCustomDataString(t.userCountry),this.userZipcode=r.getCustomDataString(t.userZipcode)}},{key:"updateCustomVideoData",value:function(t){this.customContentType=r.getCustomDataString(t.customContentType),this.customVideoDurationMillis=r.getCustomDataString(t.customVideoDurationMillis),this.customEncodingVariant=r.getCustomDataString(t.customEncodingVariant),this.customVideoLanguage=r.getCustomDataString(t.customVideoLanguage),this.customVideoId=r.getCustomDataString(t.customVideoId),this.customVideoSeries=r.getCustomDataString(t.customVideoSeries),this.customVideoProducer=r.getCustomDataString(t.customVideoProducer),this.customVideoTitle=r.getCustomDataString(t.customVideoTitle),this.customVideoVariantName=r.getCustomDataString(t.customVideoVariantName),this.customVideoVariant=r.getCustomDataString(t.customVideoVariant)}},{key:"updateCustomData",value:function(t){this.customData1=r.getCustomDataString(t.customData1),this.customData2=r.getCustomDataString(t.customData2),this.customData3=r.getCustomDataString(t.customData3),this.customData4=r.getCustomDataString(t.customData4),this.customData5=r.getCustomDataString(t.customData5),this.customData6=r.getCustomDataString(t.customData6),this.customData7=r.getCustomDataString(t.customData7),this.customData8=r.getCustomDataString(t.customData8),this.customData9=r.getCustomDataString(t.customData9),this.customData10=r.getCustomDataString(t.customData10)}},{key:"updateCustomPlayerData",value:function(t){this.customPlayerIntegrationVersion=r.getCustomDataString(t.customPlayerIntegrationVersion),this.customPlayerName=r.getCustomDataString(t.customPlayerName),this.customPageType=r.getCustomDataString(t.customPageType)}},{key:"setSessionData",value:function(){this.sessionData={session_id:this.sessionId,property_id:this.propertyId,user_id:this.userId,custom_user_id:this.customUserId,custom_data_1:this.customData1,custom_data_2:this.customData2,custom_data_3:this.customData3,custom_data_4:this.customData4,custom_data_5:this.customData5,custom_data_6:this.customData6,custom_data_7:this.customData7,custom_data_8:this.customData8,custom_data_9:this.customData9,custom_data_10:this.customData10,user_name:this.userName,user_email:this.userEMail,user_phone:this.userPhone,user_profile_image:this.userProfileImage,user_address_line1:this.userAddressLine1,user_address_line2:this.userAddressLine2,user_city:this.userCity,user_state:this.userState,user_country:this.userCountry,user_zipcode:this.userZipcode,viewer_client_version:this.SDKVersion,meta_browser:this.meta_browser,meta_device_manufacturer:this.meta_device_manufacturer,meta_operating_system_version:this.meta_operating_system_version,meta_operating_system:this.meta_operating_system,meta_device_name:this.meta_device_name,meta_browser_version:this.meta_browser_version,meta_device_category:this.meta_device_category,meta_device_architecture:this.meta_device_architecture,meta_device_display_width:this.meta_device_display_width,meta_device_display_height:this.meta_device_display_height,meta_device_is_touchscreen:this.meta_device_is_touchscreen,meta_device_display_dpr:this.meta_device_display_dpr},this.config.deviceData?(this.sessionData.meta_device_name=this.config.deviceData.meta_device_name,this.sessionData.meta_device_manufacturer=this.config.deviceData.meta_device_manufacturer,this.sessionData.meta_operating_system_version=this.config.deviceData.meta_operating_system_version,this.sessionData.meta_operating_system=this.config.deviceData.meta_operating_system,this.sessionData.meta_browser=this.config.deviceData.meta_browser,this.sessionData.meta_device_display_dpr=this.config.deviceData.meta_device_display_dpr,this.sessionData.meta_browser_version=this.config.deviceData.meta_browser_version,this.sessionData.meta_device_category=this.config.deviceData.meta_device_category,this.sessionData.meta_device_architecture=this.config.deviceData.meta_device_architecture,this.sessionData.meta_device_display_width=this.config.deviceData.meta_device_display_width,this.sessionData.meta_device_display_height=this.config.deviceData.meta_device_display_height,this.sessionData.meta_device_is_touchscreen=this.config.deviceData.meta_device_is_touchscreen):(this.sessionData.meta_device_name=ke().product,this.sessionData.meta_device_manufacturer=ke().manufacturer,this.sessionData.meta_operating_system_version=ke().os.version,this.sessionData.meta_operating_system=ke().os.family,this.sessionData.meta_browser=ke().name,this.sessionData.meta_browser_version=ke().version,this.sessionData.meta_device_category=et(),this.sessionData.meta_device_architecture=ke().os.architecture,this.sessionData.meta_device_display_dpr=window.devicePixelRatio,this.sessionData.meta_device_display_width=window.screen.width,this.sessionData.meta_device_display_height=window.screen.height,this.sessionData.meta_device_display_dpr=parseInt(window.devicePixelRatio),"ontouchstart"in document.documentElement&&(this.sessionData.meta_device_is_touchscreen="true"))}},{key:"setPlayerData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.playerData={player_instance_id:this.playerInstanceId,property_id:this.propertyId,session_id:this.sessionId,user_id:this.userId,custom_user_id:this.customUserId,custom_data_1:this.customData1,custom_data_2:this.customData2,custom_data_3:this.customData3,custom_data_4:this.customData4,custom_data_5:this.customData5,custom_data_6:this.customData6,custom_data_7:this.customData7,custom_data_8:this.customData8,custom_data_9:this.customData9,custom_data_10:this.customData10,player_integration_version:this.customPlayerIntegrationVersion,meta_page_type:this.customPageType,meta_page_url:this.pageURL},this.config.deviceData&&(this.playerData.player_preload=this.config.playerData.player_preload,this.playerData.player_autoplay=this.config.playerData.player_autoplay,this.playerData.player_software_version=this.config.playerData.player_software_version,this.playerData.player_integration_version=this.config.playerData.player_integration_version,this.playerData.player_name=this.config.playerData.player_name,this.playerData.player_language_code=this.config.playerData.player_language_code,this.playerData.player_software=this.config.playerData.player_software,this.playerData.meta_page_url=this.config.playerData.meta_page_url,this.playerData.meta_page_type=this.config.playerData.meta_page_type,this.playerData.player_height_pixels=this.config.playerData.player_height_pixels,this.playerData.player_width_pixels=this.config.playerData.player_width_pixels),t&&r.validNumber(t.videoWindowHeight)&&(this.playerData.player_height_pixels=t.videoWindowHeight),t&&r.validNumber(t.videoWindowWidth)&&(this.playerData.player_width_pixels=t.videoWindowWidth),t&&r.validBoolean(t.autoplay)&&(this.playerData.player_autoplay=t.autoplay),t&&r.validBoolean(t.preload)&&(this.playerData.player_preload=t.preload),t&&r.validString(t.version)&&(this.playerData.player_software_version=t.version),t&&r.validString(t.audioLanguage)&&(this.playerData.player_language_code=t.audioLanguage),t&&r.validString(t.playerSoftware)&&(this.playerData.player_software=t.playerSoftware)}},{key:"setUserId",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e)this.userId=e;else if(t)this.userId=r.uuidv4();else{var a=r.getCookie("gumlet_user_id");this.userId=a&&""!==a?a:r.setCookie("gumlet_user_id",43200)}}},{key:"setPlayerInstanceId",value:function(){this.config.getUUID?this.playerInstanceId=this.config.getUUID():this.playerInstanceId=r.uuidv4(),this.setPlayerData()}},{key:"setPlaybackId",value:function(){this.config.getUUID?this.playbackId=this.config.getUUID():this.playbackId=r.uuidv4()}},{key:"setSessionId",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e)return this.sessionId=e,this.setSessionData(),void(a&&this.sessionCreationCall.sendRequest(this.sessionData,r.noOp));if(t)this.sessionId=r.uuidv4();else{var i=r.getCookie("gumlet_session_id");i&&""!==i?(this.sessionId=i,this.setSessionData()):(this.sessionId=r.setCookie("gumlet_session_id",30),this.setSessionData(),this.sessionCreationCall.sendRequest(this.sessionData,r.noOp))}}},{key:"sendAnalyticsSetupCall",value:function(){this.sendAnalyticsRequestAndClearValues(Oe.SETUP,{millis_from_previous_event:0}),this.setState(Oe.SETUP)}},{key:"getMillisFromPreviousState",value:function(){return(new Date).getTime()-this.previousStateTimeStamp.getTime()}},{key:"setVideoData",value:function(t){t&&r.validNumber(t.duration)&&(this.videoDuration=r.calculateTime(t.duration)),t&&r.validString(t.streamType)&&(this.videoSourceType=t.streamType,"dash"===t.streamType&&r.validString(t.mpdUrl)?(this.videoSourceUrl=t.mpdUrl,this.videoSourceHostname=new URL(this.videoSourceUrl).hostname):"hls"===t.streamType&&r.validString(t.m3u8Url)?(this.videoSourceUrl=t.m3u8Url,this.videoSourceHostname=new URL(this.videoSourceUrl).hostname):"hls"===t.streamType&&r.validString(t.streamUrl)?(this.videoSourceUrl=t.streamUrl,this.videoSourceHostname=new URL(this.videoSourceUrl).hostname):"progressive"===t.streamType&&r.validString(t.progUrl)?(this.videoSourceUrl=t.progUrl,this.videoSourceHostname=new URL(this.videoSourceUrl).hostname):t&&t.streamUrl&&(this.videoSourceUrl=t.streamUrl,this.videoSourceHostname=new URL(this.videoSourceUrl).hostname)),t&&t.streamUrl&&(this.videoSourceUrl=t.streamUrl),t&&t.sourceHostName&&(this.videoSourceHostname=t.sourceHostName),t&&t.hasOwnProperty("muted")&&(this.isMuted=t.muted),t&&t.currentVideoData&&r.validNumber(t.currentVideoData.height)&&t.currentVideoData.height>0&&(this.videoHeightPixels=t.currentVideoData.height),t&&t.currentVideoData&&r.validNumber(t.currentVideoData.width)&&t.currentVideoData.width>0&&(this.videoWidthPixels=t.currentVideoData.width),t&&t.currentVideoData&&r.validNumber(t.currentVideoData.bitrate)&&t.currentVideoData.bitrate>-1&&(this.videoBitrate=t.currentVideoData.bitrate/1e6),t&&t.currentVideoData&&r.validString(t.currentVideoData.audioCodec)&&t.currentVideoData.audioCodec.length>0&&(this.audioCodec=t.currentVideoData.audioCodec),t&&t.currentVideoData&&r.validString(t.currentVideoData.videoCodec)&&t.currentVideoData.videoCodec.length>0&&(this.videoCodec=t.currentVideoData.videoCodec);var e=0;if(!this.videoWidthPixels||!this.playerData.player_width_pixels)return this.upscalePercentage=void 0,void(this.downscalePercentage=void 0);(e=(this.playerData.player_width_pixels-this.videoWidthPixels)/this.videoWidthPixels)>0?(this.upscalePercentage=100*e,this.downscalePercentage=0):e<0?(this.upscalePercentage=0,this.downscalePercentage=100*e*-1):(this.upscalePercentage=0,this.downscalePercentage=0);var a=new URL(this.videoSourceUrl);"video.gumlet.io"!==a.hostname||this.customVideoId||(this.customVideoId=a.pathname.split("/")[2])}},{key:"setupStateMachineCallbacks",value:function(){var e=this;this.stateMachineCallbacks={setup:function(t,a,i){nt.log("Setup Gumlet analytics "+e.analyticsVersion),e.setDuration(t),e.setVideoData(i),e.sendAnalyticsRequestAndClearValues(Oe.SETUP,{millis_from_previous_event:0}),e.setState(Oe.SETUP)},ready:function(t,a,i){e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i),e.sendAnalyticsRequestAndClearValues(Oe.PLAYER_READY),e.setState(Oe.PLAYER_READY),e.setPlayerData(i),e.playerInitCall.sendRequest(e.playerData,r.noOp)},loaded:function(t,a,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i);var n={};null!==s&&(n={millis_from_previous_event:s,previous_event:Oe.PLAYER_READY}),e.sendAnalyticsRequestAndClearValues(Oe.PLAYBACK_READY,n),null===s&&e.setState(Oe.PLAYBACK_READY)},startup:function(t,a){e.setDuration(t)},first_play:function(t,a,i){e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i),e.sendAnalyticsRequestAndClearValues(Oe.PLAY),e.setState(Oe.PLAY),e.firstPlayTimestamp=new Date},play:function(t,a,i){e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i),e.sendAnalyticsRequestAndClearValues(Oe.PLAY),e.setState(Oe.PLAY)},updateSample:function(t){e.setPlaybackSettingsFromLoadedEvent(t)},playing:function(t,a,i){e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i),e.sendAnalyticsRequestAndClearValues(Oe.PLAYING),e.setState(Oe.PLAYING)},playback_started:function(t,a,i){e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i);var s=(new Date).getTime()-e.firstPlayTimestamp.getTime();e.sendAnalyticsRequestAndClearValues(Oe.PLAYBACK_STARTED,{millis_from_previous_event:s}),e.setState(Oe.PLAYBACK_STARTED)},playingAndBye:function(t,a,i){e.setDuration(t),e.setDroppedFrames(i),e.sendUnloadRequest()},heartbeat:function(t,a,i){e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i),e.sendAnalyticsRequestAndClearValues(Oe.PLAYBACK_UPDATE),e.setState(Oe.PLAYBACK_UPDATE)},qualitychange:function(t,a){e.setDuration(t)},qualitychange_pause:function(t,a){e.setDuration(t)},qualitychange_rebuffering:function(t,a){e.setDuration(t)},videoChange:function(t){e.stateMachineCallbacks.setVideoTimeEndFromEvent(t),e.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.setPlaybackSettingsFromLoadedEvent(t)},audioChange:function(t){e.stateMachineCallbacks.setVideoTimeEndFromEvent(t),e.stateMachineCallbacks.setVideoTimeStartFromEvent(t)},pause:function(t,a,i){e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i),e.sendAnalyticsRequestAndClearValues(Oe.PAUSE),e.setState(Oe.PAUSE)},start_rebuffer:function(t,a,i){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i),s||e.sendAnalyticsRequestAndClearValues(Oe.START_REBUFFER),e.setState(Oe.START_REBUFFER)},end_rebuffer:function(t,a,i){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.setDuration(t),e.setVideoData(i),e.setPlaybackSettingsFromLoadedEvent(i),s)return e.getSample(Oe.END_REBUFFER);e.sendAnalyticsRequestAndClearValues(Oe.END_REBUFFER),e.setState(Oe.END_REBUFFER)},playback_seeked:function(t,a,i,s){e.sendAnalyticsRequestAndClearValues(Oe.SEEKED,{from:t,to:a}),e.setState(Oe.SEEKED),e.setupSample(),"PAUSE"===s?(e.sendAnalyticsRequestAndClearValues(Oe.PAUSE,{millis_from_previous_event:i}),e.setState(Oe.PAUSE)):"PLAYING"===s&&(e.sendAnalyticsRequestAndClearValues(Oe.PLAYING,{millis_from_previous_event:i}),e.setState(Oe.PLAYING))},paused_seeking:function(t,a,i){e.setDuration(t)},play_seeking:r.noOp,end_play_seeking:function(t,a,i){e.setDuration(t)},rebuffering:function(t,a,i){e.setDuration(t)},error:function(t){e.stateMachineCallbacks.setVideoTimeEndFromEvent(t),e.stateMachineCallbacks.setVideoTimeStartFromEvent(t),e.sendAnalyticsRequestAndClearValues(Oe.ERROR,{error_code:t.code,error:t.message}),e.setState(Oe.ERROR),e.setupSample()},end:function(t,a,i){e.setPlaybackId(),e.setDuration(t),e.sendAnalyticsRequestAndClearValues(Oe.END),e.setState(Oe.END)},ad:function(t,a,i){e.setDuration(t),e.setDroppedFrames(i)},mute:function(t,a){e.isMuted=!0,e.setPlaybackSettingsFromLoadedEvent(a),e.sendAnalyticsRequestAndClearValues(Oe.MUTE)},unMute:function(t,a){e.isMuted=!1,e.setPlaybackSettingsFromLoadedEvent(a),e.sendAnalyticsRequestAndClearValues(Oe.UNMUTE)},muting_ready:r.noOp,muting_play:r.noOp,muting_pause:r.noOp,setVideoTimeEndFromEvent:function(t){},setVideoTimeStartFromEvent:function(t){},startCasting:function(a,i){if(i&&i.resuming)return e.isAllowedToSendSamples=!1,void nt.warning("Player started casting but a session is already casting!");e.isCastClient=!0,e.isAllowedToSendSamples=!1;var s=e.sample,n=s.domain,r=s.path,o=s.language,l=s.userAgent,u=s.userId,c=s.impressionId,E={type:t.CAST_RECEIVER_CONFIG_MESSAGE,data:{config:e.config,userId:u,domain:n,path:r,language:o,userAgent:l,impressionId:c}};e.castClient.setUp(),e.castClient.sendMessage(E)},casting:function(){e.isCastClient=!1,e.samplesQueue=[],e.isAllowedToSendSamples=!0},source_changing:function(){},resetSessionExpiry:function(){e.config.test||e.config.sessionID||(r.setCookie("gumlet_session_id",30,e.sessionId),r.setCookie("gumlet_user_id",43200,e.userId))}}}},{key:"setDuration",value:function(t){}},{key:"setState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;t&&(this.previousState=t,this.previousStateTimeStamp=new Date)}},{key:"setPlaybackSettingsFromLoadedEvent",value:function(t){t&&r.validNumber(t.currentTime)&&(this.currentTime=r.calculateTime(t.currentTime)),t&&r.validBoolean(t.isFullScreen)&&(this.isFullScreen=t.isFullScreen),t&&r.validBoolean(t.isCasting)&&(this.isCasting=t.isCasting)}},{key:"setupSample",value:function(){this.sample={property_id:this.propertyId,session_id:this.sessionId,user_id:this.userId,player_instance_id:this.playerInstanceId,playback_id:this.playbackId,from:void 0,to:void 0,playback_time_instant_millis:void 0,bitrate_mbps:this.videoBitrate,error_code:void 0,error:void 0,error_text:void 0,video_cover:void 0,video_cover_reference:void 0,player_remote_played:void 0,video_total_duration_millis:this.videoDuration,video_width_pixels:void 0,video_height_pixels:void 0,video_source_url:void 0,video_source_hostname:void 0,video_source_type:void 0,custom_content_type:this.customContentType,custom_video_duration_millis:this.customVideoDurationMillis,custom_encoding_variant:this.customEncodingVariant,custom_video_language:this.customVideoLanguage,custom_video_id:this.customVideoId,custom_video_series:this.customVideoSeries,custom_video_producer:this.customVideoProducer,custom_video_title:this.customVideoTitle,custom_video_variant_name:this.customVideoVariantName,custom_video_variant:this.customVideoVariant,muted:this.isMuted,casting:void 0,fullscreen:this.isFullScreen,video_downscale_percentage:void 0,video_upscale_percentage:void 0,orientation:void 0,orientation_from:void 0,quality:void 0,quality_from:void 0,previous_event:void 0,millis_from_previous_event:void 0,video_codec:void 0,audio_codec:void 0,custom_data_1:this.customData1,custom_data_2:this.customData2,custom_data_3:this.customData3,custom_data_4:this.customData4,custom_data_5:this.customData5,custom_data_6:this.customData6,custom_data_7:this.customData7,custom_data_8:this.customData8,custom_data_9:this.customData9,custom_data_10:this.customData10}}},{key:"getSample",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.sample;if(a.event=t,this.config.getUUID?a.event_id=this.config.getUUID():a.event_id=r.uuidv4(),a.custom_data_1=this.customData1,a.custom_data_2=this.customData2,a.custom_data_3=this.customData3,a.custom_data_4=this.customData4,a.custom_data_5=this.customData5,a.custom_data_6=this.customData6,a.custom_data_7=this.customData7,a.custom_data_8=this.customData8,a.custom_data_9=this.customData9,a.custom_data_10=this.customData1,a.custom_content_type=this.customContentType,a.custom_video_duration_millis=this.customVideoDurationMillis,a.custom_encoding_variant=this.customEncodingVariant,a.custom_video_language=this.customVideoLanguage,a.custom_video_id=this.customVideoId,a.custom_video_series=this.customVideoSeries,a.custom_video_producer=this.customVideoProducer,a.custom_video_title=this.customVideoTitle,a.custom_video_variant_name=this.customVideoVariantName,a.custom_video_variant=this.customVideoVariant,a.millis_from_previous_event=this.getMillisFromPreviousState(),a.previous_event=this.previousState,a.fullscreen=this.isFullScreen,a.muted=this.isMuted,a.video_width_pixels=this.videoWidthPixels,a.video_height_pixels=this.videoHeightPixels,a.video_total_duration_millis=this.videoDuration,a.bitrate=this.videoBitrate,a.audio_codec=this.audioCodec,a.video_codec=this.videoCodec,a.orientation=this.orientation,a.playback_time_instant_millis=this.currentTime,a.video_source_type=this.videoSourceType,a.video_source_url=this.videoSourceUrl,a.video_upscale_percentage=this.upscalePercentage,a.video_downscale_percentage=this.downscalePercentage,a.video_source_hostname=this.videoSourceHostname,Object.keys(e).forEach((function(t){a[t]=e[t]})),"undefined"!=typeof window&&void 0!==window.parent&&window.navigator)try{window.navigator.getBattery().then((function(t){a.battery_level_percentage=100*t.level,a.battery_charging=t.charging}))}catch(t){}return a}},{key:"sendAnalyticsRequest",value:function(t,e){var a=this.getSample(t,e);this.analyticsCall.sendRequest(a,r.noOp)}},{key:"sendAnalyticsRequestAndClearValues",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return nt.log("event null passed not hitting the injestion API"),False;this.sendAnalyticsRequest(t,e)}},{key:"sendUnloadRequest",value:function(){"denied"!==this.licensing&&(void 0===navigator.sendBeacon?this.sendAnalyticsRequestSynchronous():navigator.sendBeacon(this.analyticsCall.getAnalyticsServerUrl(),JSON.stringify(this.sample))||this.sendAnalyticsRequestSynchronous())}},{key:"sendAnalyticsRequestSynchronous",value:function(){"denied"!==this.licensing&&this.analyticsCall.sendRequestSynchronous(this.sample,r.noOp)}},{key:"clearValues",value:function(){this.sample.ad=0,this.sample.paused=0,this.sample.played=0,this.sample.seeked=0,this.sample.buffered=0,this.sample.playerStartupTime=0,this.sample.videoStartupTime=0,this.sample.startupTime=0,this.sample.duration=0,this.sample.droppedFrames=0,this.sample.pageLoadType=0}},{key:"getDroppedFrames",value:function(t){if(null!=t&&0!=t){var e=t-this.droppedSampleFrames;return this.droppedSampleFrames=t,e}return 0}}],a&&we(e.prototype,a),i&&we(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();Me(He,"PAGE_LOAD_TYPE",{FOREGROUND:1,BACKGROUND:2}),Me(He,"LICENSE_CALL_PENDING_TIMEOUT",200),Me(He,"PAGE_LOAD_TYPE_TIMEOUT",200),Me(He,"CAST_RECEIVER_CONFIG_MESSAGE","CAST_RECEIVER_CONFIG_MESSAGE");const Ke=He;const Ve={CLOUDFLARE:"cloudflare",AKAMAI:"akamai",FASTLY:"fastly",MAXCDN:"maxcdn",CLOUDFRONT:"cloudfront",CHINACACHE:"chinacache",BITGRAVITY:"bitgravity"};var Be,je=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Be.register(t,e)},xe=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Be.registerVideoJSPlayer(t,e)},Qe=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Be.registerDashJSPlayer(t,e)},We=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Be.registerHLSJSPlayer(t,e)},qe=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Be.registerShakaPlayer(t,e)},Je=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Be.registerHTML5Player(t,e)},$e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Be.registerReactNativeVideoPlayer(t,e)},Xe=function(){return Be.getCurrentImpressionId()},ze=function(){return Be.analyticsStateMachine},Ze=function(t){return Be.updateCustomData(t)},ta=function(t){return Be.updateCustomVideoData(t)},ea=function(t){return Be.updateCustomUserData(t)},aa=function(t){return Be.updateCustomPlayerData(t)},ia=function(t){return Be=new Ke(t),{register:je,registerVideoJSPlayer:xe,registerDashJSPlayer:Qe,registerHLSJSPlayer:We,registerShakaPlayer:qe,registerHTML5Player:Je,registerReactNativeVideoPlayer:$e,getCurrentImpressionId:Xe,stateMachine:ze,updateCustomData:Ze,updateCustomVideoData:ta,updateCustomUserData:ea,updateCustomPlayerData:aa,setCustomData:Be.setCustomData,setCustomDataOnce:Be.setCustomDataOnce}};ia.Players=Lt,ia.CdnProviders=Ve,ia.gumletInsightsEvents=ct,ia.gumletSupportedPlayers=Lt,"undefined"!=typeof window&&(window.gumlet=window.gumlet||{},window.gumlet.insights=ia,window.gumletInsightsEvents=ct,window.gumletSupportedPlayers=Lt);const sa={insights:ia,gumletInsightsEvents,gumletSupportedPlayers}})(),i})()));